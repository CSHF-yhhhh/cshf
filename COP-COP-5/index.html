<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>计算机组成原理——中央处理器 - CSHF</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CSHF"><meta name="msapplication-TileImage" content="/img/logo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CSHF"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="计算机组成原理——中央处理器"><meta property="og:type" content="blog"><meta property="og:title" content="计算机组成原理——中央处理器"><meta property="og:url" content="http://blog.cshf.xyz/COP-COP-5/"><meta property="og:site_name" content="CSHF"><meta property="og:description" content="计算机组成原理——中央处理器"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E6%AD%A5%E9%AA%A4.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/CPU%E5%8D%95%E6%80%BB%E7%BA%BF%E4%BE%8B%E9%A2%98.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E4%B8%93%E7%94%A8%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%B0%B4%E5%B9%B3%E5%9E%8B%E5%BE%AE%E5%91%BD%E4%BB%A4.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E5%9E%82%E7%9B%B4%E5%9E%8B%E5%BE%AE%E6%8C%87%E4%BB%A4.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E5%AD%97%E6%AE%B5%E7%9B%B4%E6%8E%A5%E7%BC%96%E7%A0%81.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E4%B8%80%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E4%BA%8C%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E8%A3%85%E5%85%A5%E6%97%B6%E9%97%B4%E6%8E%92%E7%A9%BA%E6%97%B6%E9%97%B4.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%95%88%E7%8E%87%E5%9B%BE.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E6%A0%87%E9%87%8F%E6%8A%80%E6%9C%AF.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E6%B5%81%E6%B0%B4%E6%8A%80%E6%9C%AF.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97.jpg"><meta property="og:image" content="http://blog.cshf.xyz/COP-COP-5/%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA.jpg"><meta property="article:published_time" content="2021-07-06T08:10:16.000Z"><meta property="article:modified_time" content="2021-08-17T11:38:38.115Z"><meta property="article:author" content="CSHF"><meta property="article:tag" content="Computer Organization Principles"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/COP-COP-5/%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E6%AD%A5%E9%AA%A4.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.cshf.xyz/COP-COP-5/"},"headline":"CSHF","image":["http://blog.cshf.xyz/COP-COP-5/%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E6%AD%A5%E9%AA%A4.jpg","http://blog.cshf.xyz/COP-COP-5/%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B.jpg","http://blog.cshf.xyz/COP-COP-5/CPU%E5%8D%95%E6%80%BB%E7%BA%BF%E4%BE%8B%E9%A2%98.jpg","http://blog.cshf.xyz/COP-COP-5/%E4%B8%93%E7%94%A8%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F.jpg","http://blog.cshf.xyz/COP-COP-5/%E6%B0%B4%E5%B9%B3%E5%9E%8B%E5%BE%AE%E5%91%BD%E4%BB%A4.jpg","http://blog.cshf.xyz/COP-COP-5/%E5%9E%82%E7%9B%B4%E5%9E%8B%E5%BE%AE%E6%8C%87%E4%BB%A4.jpg","http://blog.cshf.xyz/COP-COP-5/%E5%AD%97%E6%AE%B5%E7%9B%B4%E6%8E%A5%E7%BC%96%E7%A0%81.jpg","http://blog.cshf.xyz/COP-COP-5/%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg","http://blog.cshf.xyz/COP-COP-5/%E4%B8%80%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg","http://blog.cshf.xyz/COP-COP-5/%E4%BA%8C%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg","http://blog.cshf.xyz/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F.jpg","http://blog.cshf.xyz/COP-COP-5/%E8%A3%85%E5%85%A5%E6%97%B6%E9%97%B4%E6%8E%92%E7%A9%BA%E6%97%B6%E9%97%B4.jpg","http://blog.cshf.xyz/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%95%88%E7%8E%87%E5%9B%BE.jpg","http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E6%A0%87%E9%87%8F%E6%8A%80%E6%9C%AF.jpg","http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E6%B5%81%E6%B0%B4%E6%8A%80%E6%9C%AF.jpg","http://blog.cshf.xyz/COP-COP-5/%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97.jpg","http://blog.cshf.xyz/COP-COP-5/%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA.jpg"],"datePublished":"2021-07-06T08:10:16.000Z","dateModified":"2021-08-17T11:38:38.115Z","author":{"@type":"Person","name":"CSHF"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"计算机组成原理——中央处理器"}</script><link rel="canonical" href="http://blog.cshf.xyz/COP-COP-5/"><link rel="icon" href="/img/logo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?f72d939143c49eed016fe7d2b8d84b57";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-67FMB9X7MP" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-67FMB9X7MP")</script><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/CSHF_LOGO.png" alt="CSHF" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/CSHF-yhhhh"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-07-06T08:10:16.000Z" title="2021/7/6 下午4:10:16">2021-07-06</time>发表</span><span class="level-item"><time datetime="2021-08-17T11:38:38.115Z" title="2021/8/17 下午7:38:38">2021-08-17</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a><span> / </span><a class="link-muted" href="/categories/Note/Computer-Organization-Principles/">Computer Organization Principles</a></span><span class="level-item">1 小时读完 (大约8434个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">计算机组成原理——中央处理器</h1><div class="content"><p>计算机组成原理——中央处理器</p><span id="more"></span><hr><h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ol><li><a href="#CPU%E7%9A%84%E5%8A%9F%E8%83%BD%E4%B8%8E%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84">CPU 的功能与基本结构</a><ol><li><a href="#%E5%8A%9F%E8%83%BD">功能</a><ol><li><a href="#%E6%8C%87%E4%BB%A4%E6%8E%A7%E5%88%B6">指令控制</a></li><li><a href="#%E6%93%8D%E4%BD%9C%E6%8E%A7%E5%88%B6">操作控制</a></li><li><a href="#%E6%97%B6%E9%97%B4%E6%8E%A7%E5%88%B6">时间控制</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%B7%A5">数据加工</a></li><li><a href="#%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86">中断处理</a></li></ol></li><li><a href="#%E7%BB%84%E6%88%90">组成</a><ol><li><a href="#%E8%BF%90%E7%AE%97%E5%99%A8">运算器</a><ol><li><a href="#%E8%BF%90%E7%AE%97%E5%99%A8%E7%9A%84%E7%BB%93%E6%9E%84">运算器的结构</a><ol><li><a href="#%E7%AE%97%E6%9C%AF%E9%80%BB%E8%BE%91%E5%8D%95%E5%85%83">算术逻辑单元</a></li><li><a href="#%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8%E7%BB%84">通用寄存器组</a></li><li><a href="#%E6%9A%82%E5%AD%98%E5%AF%84%E5%AD%98%E5%99%A8">暂存寄存器</a></li><li><a href="#%E7%B4%AF%E5%8A%A0%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88ACC%EF%BC%89">累加寄存器（ACC）</a></li><li><a href="#%E7%A8%8B%E5%BA%8F%E7%8A%B6%E6%80%81%E5%AD%97%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88PSW%EF%BC%89">程序状态字寄存器（PSW）</a></li><li><a href="#%E7%A7%BB%E4%BD%8D%E5%99%A8">移位器</a></li><li><a href="#%E8%AE%A1%E6%95%B0%E5%99%A8">计数器</a></li></ol></li></ol></li><li><a href="#%E6%8E%A7%E5%88%B6%E5%99%A8">控制器</a><ol><li><a href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90">控制器的组成</a><ol><li><a href="#%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%EF%BC%88CU%EF%BC%89%EF%BC%88%E6%A0%B8%E5%BF%83%E9%83%A8%E4%BB%B6%EF%BC%89">控制单元（CU）（核心部件）</a></li><li><a href="#%E6%8C%87%E4%BB%A4%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88IR%EF%BC%89">指令寄存器（IR）</a></li><li><a href="#%E6%8C%87%E4%BB%A4%E8%AF%91%E7%A0%81%E5%99%A8">指令译码器</a></li><li><a href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8%EF%BC%88PC%EF%BC%89">程序计数器（PC）</a></li><li><a href="#%E5%BE%AE%E6%93%8D%E4%BD%9C%E4%BF%A1%E5%8F%B7%E5%8F%91%E7%94%9F%E5%99%A8">微操作信号发生器</a></li><li><a href="#%E6%97%B6%E5%BA%8F%E7%B3%BB%E7%BB%9F">时序系统</a></li><li><a href="#%E5%AD%98%E5%82%A8%E5%99%A8%E5%9C%B0%E5%9D%80%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88MAR%EF%BC%89">存储器地址寄存器（MAR）</a></li><li><a href="#%E5%AD%98%E5%82%A8%E5%99%A8%E6%95%B0%E6%8D%AE%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88MDR%EF%BC%89">存储器数据寄存器（MDR）</a></li></ol></li></ol></li></ol></li></ol></li><li><a href="#%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C">指令执行</a><ol><li><a href="#%E5%91%A8%E6%9C%9F">周期</a><ol><li><a href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F">指令周期</a></li><li><a href="#%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F">机器周期</a></li><li><a href="#%E6%97%B6%E9%92%9F%E5%91%A8%E6%9C%9F">时钟周期</a></li><li><a href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B">指令周期流程</a><ol><li><a href="#%E5%8F%96%E5%9D%80%E5%91%A8%E6%9C%9F">取址周期</a></li><li><a href="#%E9%97%B4%E5%9D%80%E5%91%A8%E6%9C%9F">间址周期</a></li><li><a href="#%E6%89%A7%E8%A1%8C%E5%91%A8%E6%9C%9F">执行周期</a></li><li><a href="#%E4%B8%AD%E6%96%AD%E5%91%A8%E6%9C%9F">中断周期</a></li></ol></li></ol></li><li><a href="#%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%96%B9%E6%A1%88">指令执行方案</a></li></ol></li><li><a href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%EF%BC%88%E9%AB%98%E9%A2%91%E8%80%83%EF%BC%89">数据通路（高频考）</a><ol><li><a href="#CPU%E5%86%85%E9%83%A8%E6%80%BB%E7%BA%BF%E6%96%B9%E5%BC%8F">CPU 内部总线方式</a><ol><li><a href="#%E5%AF%84%E5%AD%98%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81">寄存器之间的数据传送</a></li><li><a href="#%E4%B8%BB%E5%AD%98%E4%B8%8ECPU%E4%B9%8B%E9%97%B4%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81">主存与 CPU 之间数据传送</a></li><li><a href="#%E6%89%A7%E8%A1%8C%E7%AE%97%E6%9C%AF%E6%88%96%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97">执行算术或逻辑运算</a></li><li><a href="#%E4%BE%8B%E9%A2%98">例题</a></li></ol></li><li><a href="#%E4%B8%93%E7%94%A8%E9%80%9A%E8%B7%AF%E6%96%B9%E5%BC%8F">专用通路方式</a><ol><li><a href="#%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F">取指周期</a></li></ol></li></ol></li><li><a href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E8%AE%BE%E8%AE%A1">控制器设计</a><ol><li><a href="#%E7%A1%AC%E9%83%A8%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%99%A8">硬部件控制器</a><ol><li><a href="#%E7%89%B9%E7%82%B9">特点</a></li></ol></li><li><a href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8">微程序控制器</a><ol><li><a href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%EF%BC%88%E5%B8%B8%E8%80%83%EF%BC%89">微程序控制器的基本结构（常考）</a></li><li><a href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">微程序控制器的工作流程</a></li><li><a href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E8%AE%BE%E8%AE%A1">微指令的设计</a></li><li><a href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E6%A0%BC%E5%BC%8F">微指令的格式</a></li><li><a href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%EF%BC%88%E5%B8%B8%E8%80%83%EF%BC%89">微指令的编码方式（常考）</a><ol><li><a href="#%E7%9B%B4%E6%8E%A5%E7%BC%96%E7%A0%81%EF%BC%88%E7%9B%B4%E6%8E%A5%E6%8E%A7%E5%88%B6%EF%BC%89%E6%96%B9%E5%BC%8F%EF%BC%88%E5%B8%B8%E8%80%83%EF%BC%89">直接编码（直接控制）方式（常考）</a></li><li><a href="#%E5%AD%97%E6%AE%B5%E7%9B%B4%E6%8E%A5%E7%BC%96%E7%A0%81">字段直接编码</a></li><li><a href="#%E5%AD%97%E6%AE%B5%E9%97%B4%E6%8E%A5%E7%BC%96%E7%A0%81%EF%BC%88%E9%9A%90%E5%BC%8F%E7%BC%96%E7%A0%81%EF%BC%89">字段间接编码（隐式编码）</a></li></ol></li><li><a href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E5%9C%B0%E5%9D%80%E5%BD%A2%E6%88%90%E6%96%B9%E5%BC%8F">微指令的地址形成方式</a></li><li><a href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E7%9A%84%E8%AE%BE%E8%AE%A1">微程序控制单元的设计</a></li><li><a href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%88%86%E7%B1%BB">微程序设计的分类</a></li></ol></li><li><a href="#%E7%A1%AC%E5%B8%83%E7%BA%BF%E4%B8%8E%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%AF%94%E8%BE%83%EF%BC%88%E5%B8%B8%E8%80%83%EF%BC%89">硬布线与微程序比较（常考）</a></li></ol></li><li><a href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF">指令流水线</a><ol><li><a href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87">性能指标</a></li><li><a href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0%EF%BC%88%E5%B8%B8%E8%80%83%E6%95%B0%E6%8D%AE%E5%86%B2%E7%AA%81%EF%BC%89">指令流水线的影响因素（常考数据冲突）</a></li><li><a href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%88%86%E7%B1%BB">流水线的分类</a><ol><li><a href="#%E9%83%A8%E4%BB%B6%E5%8A%9F%E8%83%BD%E7%BA%A7,%E5%A4%84%E7%90%86%E6%9C%BA%E7%BA%A7%E5%92%8C%E5%A4%84%E7%90%86%E6%9C%BA%E9%97%B4%E7%BA%A7%E6%B5%81%E6%B0%B4%E7%BA%BF">部件功能级,处理机级和处理机间级流水线</a></li><li><a href="#%E5%8D%95%E5%8A%9F%E8%83%BD%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%92%8C%E5%A4%9A%E5%8A%9F%E8%83%BD%E6%B5%81%E6%B0%B4%E7%BA%BF">单功能流水线和多功能流水线</a></li><li><a href="#%E5%8A%A8%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%92%8C%E9%9D%99%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF">动态流水线和静态流水线</a></li><li><a href="#%E7%BA%BF%E6%80%A7%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%92%8C%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%B5%81%E6%B0%B4%E7%BA%BF">线性流水线和非线性流水线</a></li></ol></li><li><a href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%A4%9A%E5%8F%91%E6%8A%80%E6%9C%AF">流水线的多发技术</a><ol><li><a href="#%E8%B6%85%E6%A0%87%E9%87%8F%E6%8A%80%E6%9C%AF">超标量技术</a></li><li><a href="#%E8%B6%85%E6%B5%81%E6%B0%B4%E6%8A%80%E6%9C%AF">超流水技术</a></li><li><a href="#%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97">超长指令字</a></li></ol></li><li><a href="#%E4%BA%94%E6%AE%B5%E5%BC%8F%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF%EF%BC%88%E8%80%83%E8%AF%95%E9%A2%98%E7%9B%AE%E5%88%86%E6%9E%90%EF%BC%89">五段式指令流水线（考试题目分析）</a><ol><li><a href="#%E8%BF%90%E7%AE%97%E7%B1%BB%E6%8C%87%E4%BB%A4">运算类指令</a></li><li><a href="#LOAD%E6%8C%87%E4%BB%A4">LOAD 指令</a></li><li><a href="#STORE%E6%8C%87%E4%BB%A4">STORE 指令</a></li><li><a href="#%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4">条件转移指令</a></li><li><a href="#%E6%97%A0%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4">无条件转移指令</a></li></ol></li></ol></li></ol><hr><p><span id="CPU的功能与基本结构"></span></p><h1 id="CPU-的功能与基本结构"><a href="#CPU-的功能与基本结构" class="headerlink" title="CPU 的功能与基本结构"></a>CPU 的功能与基本结构</h1><p>CPU 种对用户可见的寄存器有 程序状态字寄存器(PSW), 累加寄存器(ACC), 通用寄存器, 程序计数器(PC)</p><p><span id="功能"></span></p><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p><span id="指令控制"></span></p><ul><li><h4 id="指令控制"><a href="#指令控制" class="headerlink" title="指令控制"></a>指令控制</h4><blockquote><p>程序的顺序控制</p></blockquote><p>完成取指令,分析指令和指令执行的操作</p></li></ul><p><span id="操作控制"></span></p><ul><li><h4 id="操作控制"><a href="#操作控制" class="headerlink" title="操作控制"></a>操作控制</h4><p>管理并产生由内存取出的每条指令的操作信号, 把各种操作信号送往相应的部件, 从而控制这些部件按指令的要求运行</p></li></ul><p><span id="时间控制"></span></p><ul><li><h4 id="时间控制"><a href="#时间控制" class="headerlink" title="时间控制"></a>时间控制</h4><p>对各种操作加上时间控制<br>时间控制要为每条指令按时间顺序提供控制信号</p></li></ul><p><span id="数据加工"></span></p><ul><li><h4 id="数据加工"><a href="#数据加工" class="headerlink" title="数据加工"></a>数据加工</h4><p>对数据进行算数运算和逻辑运算</p></li></ul><p><span id="中断处理"></span></p><ul><li><h4 id="中断处理"><a href="#中断处理" class="headerlink" title="中断处理"></a>中断处理</h4>对计算机运行过程中出现的异常情况和特殊请求做处理</li></ul><p><span id="组成"></span></p><h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><blockquote><p>其中 PC,PSW,ACC,和通用寄存器对用户可见</p></blockquote><p><span id="运算器"></span></p><h3 id="运算器"><a href="#运算器" class="headerlink" title="运算器"></a>运算器</h3><p>对数据进行加工</p><p><span id="运算器的结构"></span></p><h4 id="运算器的结构"><a href="#运算器的结构" class="headerlink" title="运算器的结构"></a>运算器的结构</h4><p><span id="算术逻辑单元"></span></p><ul><li><h5 id="算术逻辑单元"><a href="#算术逻辑单元" class="headerlink" title="算术逻辑单元"></a>算术逻辑单元</h5><p>进行算数逻辑运算</p></li></ul><p><span id="通用寄存器组"></span></p><ul><li><h5 id="通用寄存器组"><a href="#通用寄存器组" class="headerlink" title="通用寄存器组"></a>通用寄存器组</h5><p>存放操作数和各种地址信息等</p><ul><li>专用数据通路方式<br>根据指令执行过程中的数据和地址的流动方向安排连接线路<br><u>性能较高, 基本不存在数据冲突的现象, 但是结构复杂, 硬件量大, 不易实现</u><blockquote><p>两个部件之间有专用线路</p></blockquote></li><li>CPU 内部单总线方式<br>将所有寄存器的输入和输出端连接到数据总线上, 用电信号来控制读\写哪个寄存器<br><u>结构简单,容易实现, 但数据传输存在较多冲突现象, 性能较低</u></li></ul></li></ul><p><span id="暂存寄存器"></span></p><ul><li><h5 id="暂存寄存器"><a href="#暂存寄存器" class="headerlink" title="暂存寄存器"></a>暂存寄存器</h5><p>(使用 CPU 内部单总线方式时才存在)</p><p>用于暂存从主存读来的数据</p></li></ul><p><span id="累加寄存器（ACC）"></span></p><ul><li><h5 id="累加寄存器-ACC"><a href="#累加寄存器-ACC" class="headerlink" title="累加寄存器(ACC)"></a>累加寄存器(ACC)</h5><p>用于暂时存放 ALU 的运算结果</p></li></ul><p><span id="程序状态字寄存器（PSW）"></span></p><ul><li><h5 id="程序状态字寄存器-PSW"><a href="#程序状态字寄存器-PSW" class="headerlink" title="程序状态字寄存器(PSW)"></a>程序状态字寄存器(PSW)</h5><p>保留由算术逻辑运算指令或测试指令的结果(溢出标志, 符号标志, 零标志等)</p></li></ul><p><span id="移位器"></span></p><ul><li><h5 id="移位器"><a href="#移位器" class="headerlink" title="移位器"></a>移位器</h5><p>对运算结果进行移位运算</p></li></ul><p><span id="计数器"></span></p><ul><li><h5 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h5>控制乘除运算的操作步骤</li></ul><p><span id="控制器"></span></p><h3 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h3><p>协调并控制计算机各部件执行程序的指令序列<br>有取指令, 分析指令, 执行指令的功能<br><strong>控制器能区分存储单元中存放的是指令还是数据</strong></p><blockquote><p>完成一条指令的步骤<br>PC 取址令–&gt;IR 分析指令–&gt;CU 执行指令</p></blockquote><p><span id="控制器的组成"></span></p><h4 id="控制器的组成"><a href="#控制器的组成" class="headerlink" title="控制器的组成"></a>控制器的组成</h4><p><span id="控制单元（CU）（核心部件）"></span></p><ul><li><h5 id="控制单元-CU-核心部件"><a href="#控制单元-CU-核心部件" class="headerlink" title="控制单元(CU)(核心部件)"></a>控制单元(CU)(核心部件)</h5><p>分析指令, 给出控制信号</p><ul><li>CU 发出一个微命令, 可完成对应微操作</li><li>每个时钟周期内可以完成多个微操作<br>这些微操作互不影响(不使用同一条通路)</li><li>FE,IND,EX,INT 四个触发器集成在 CU 内<br>分别标识当前处于哪一个周期(取指周期, 间址周期, 执行周期, 中断周期)</li><li>根据指令操作码, 目前的机器周期, 时钟信号, 机器状态条件 可确定当前时钟周期应该发出的微命令<br>每个时钟周期发出一个时钟信号(循环)</li><li>每个输出的控制信号对应一个微命令(微操作)</li></ul></li></ul><p><span id="指令寄存器（IR）"></span></p><ul><li><h5 id="指令寄存器-IR"><a href="#指令寄存器-IR" class="headerlink" title="指令寄存器(IR)"></a>指令寄存器(IR)</h5><p>存放当前执行的指令</p></li></ul><p><span id="指令译码器"></span></p><ul><li><h5 id="指令译码器"><a href="#指令译码器" class="headerlink" title="指令译码器"></a>指令译码器</h5><p>对操作码译码, 向控制器提供操作信号</p></li></ul><p><span id="程序计数器（PC）"></span></p><ul><li><h5 id="程序计数器-PC"><a href="#程序计数器-PC" class="headerlink" title="程序计数器(PC)"></a>程序计数器(PC)</h5><p>存放下一条指令地址, 有自动加 1 功能</p><blockquote><p>长度取决与 MDR 长度相等<br>$$MDR位数=\frac{存储容量}{字长}$$</p></blockquote></li></ul><p><span id="微操作信号发生器"></span></p><ul><li><h5 id="微操作信号发生器"><a href="#微操作信号发生器" class="headerlink" title="微操作信号发生器"></a>微操作信号发生器</h5><p>根据 IR 的内容, PSW 的内容, 时序信号, 产生控制整个计算机系统所需的各种控制信号<br>有组合逻辑型和存储逻辑型两种</p></li></ul><p><span id="时序系统"></span></p><ul><li><h5 id="时序系统"><a href="#时序系统" class="headerlink" title="时序系统"></a>时序系统</h5><p>产生各种时序信号(由统一时钟分频得到)</p></li></ul><p><span id="存储器地址寄存器（MAR）"></span></p><ul><li><h5 id="存储器地址寄存器-MAR"><a href="#存储器地址寄存器-MAR" class="headerlink" title="存储器地址寄存器(MAR)"></a>存储器地址寄存器(MAR)</h5><p>存放所要访问的主存单元的地址</p></li></ul><p><span id="存储器数据寄存器（MDR）"></span></p><ul><li><h5 id="存储器数据寄存器-MDR"><a href="#存储器数据寄存器-MDR" class="headerlink" title="存储器数据寄存器(MDR)"></a>存储器数据寄存器(MDR)</h5>存放向主存写入的信息或者从主存读出的信息</li></ul><p><span id="指令执行"></span></p><h1 id="指令执行"><a href="#指令执行" class="headerlink" title="指令执行"></a>指令执行</h1><blockquote><p>取址操作由控制器自动进行</p></blockquote><p><img src="/COP-COP-5/%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E6%AD%A5%E9%AA%A4.jpg" alt="指令执行步骤"></p><p><span id="周期"></span></p><h2 id="周期"><a href="#周期" class="headerlink" title="周期"></a>周期</h2><blockquote><p>计算机工作的最小时间周期是时钟周期</p></blockquote><p><span id="指令周期"></span></p><h3 id="指令周期"><a href="#指令周期" class="headerlink" title="指令周期"></a>指令周期</h3><ul><li>CPU 从主存中每取出并执行一条指令所需的全部时间</li><li><strong>指令周期</strong>用若干个<strong>机器周期</strong>来表示</li><li>每个指令周期内机器周期数可以不等, 每个机器周期内的节拍数也可以不等</li></ul><p><span id="机器周期"></span></p><h3 id="机器周期"><a href="#机器周期" class="headerlink" title="机器周期"></a>机器周期</h3><p>机器周期也叫 CPU 周期<br>机器周期用来表示完成<strong>某一个操作</strong>所用的时间</p><ul><li>定长的机器周期<br>执行每种操作所用的时间相同, 以可能出现的时钟周期为准</li><li>不定长的机器周期<br>执行不同操作所用的时间不相同<blockquote><p>一个<strong>机器周期</strong>包含若干<strong>时钟周期</strong></p></blockquote></li></ul><p><span id="时钟周期"></span></p><h3 id="时钟周期"><a href="#时钟周期" class="headerlink" title="时钟周期"></a>时钟周期</h3><p>时钟周期也称为<strong>节拍</strong>,T 周期,CPU 时钟周期,是 CPU 操作的最基本单位</p><p><span id="指令周期流程"></span></p><h3 id="指令周期流程"><a href="#指令周期流程" class="headerlink" title="指令周期流程"></a>指令周期流程</h3><p><img src="/COP-COP-5/%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B.jpg" alt="指令周期流程"><br>四个工作周期都有 CPU 访存操作, 只是访存的目的不同<br>指令在执行时都有可能被外部中断打断</p><p><span id="取址周期"></span></p><h4 id="取址周期"><a href="#取址周期" class="headerlink" title="取址周期"></a>取址周期</h4><p><strong>取指令的流程</strong></p><ol><li>将当前指令地址送至存储器地址寄存器(MAR)<br>(PC)-&gt;MAR</li><li>CU 发出控制信号(读信号), 经控制总线传到主存<br>1-&gt;R</li><li>将 MAR 所指的主存内容经数据总线送入 MDR<br>M(MAR)-&gt;MDR</li><li>将 MDR 中的内容(当前存放的是指令)送入 IR<br>(MDR)-&gt;IR</li><li>CU 发出控制信号, 形成下一条指令地址<br>(PC)+1-&gt;PC</li></ol><p><span id="间址周期"></span></p><h4 id="间址周期"><a href="#间址周期" class="headerlink" title="间址周期"></a>间址周期</h4><p>取有效地址</p><ol><li>将指令的地址码送入 MAR<br>Ad(IR)-&gt;MAR 或 Ad(MDR)-&gt;MAR</li><li>CU 发出控制信号, 启动主存读操作<br>1-&gt;R</li><li>将 MAR 所指主存中的内容经数据总线送入 MDR<br>M(MAR)-&gt;MDR</li><li>将有效地址送至指令的地址码字段<br>(MDR)-&gt;Ad(IR)</li></ol><p><span id="执行周期"></span></p><h4 id="执行周期"><a href="#执行周期" class="headerlink" title="执行周期"></a>执行周期</h4><p>取操作数</p><p><span id="中断周期"></span></p><h4 id="中断周期"><a href="#中断周期" class="headerlink" title="中断周期"></a>中断周期</h4><p>暂停当前任务去完成其他任务, 需要保存断点(为了能够恢复当前任务)<br>一般使用堆栈保存断点</p><blockquote><p>只有出现中断请求时, 才会进入中断周期</p></blockquote><ol><li>CU 控制将 SP 减 1, 修改后的地址送入 MAR<br>(SP)-1-&gt;SP, (SP)-&gt;MAR<blockquote><p>堆栈一般是在主存中,故也可记为将断点地址存入某个存储单元 a-&gt;MAR</p></blockquote></li><li>CU 发出控制信号 启动主存做写操作<br>1-&gt;W</li><li>将断点(PC 内容)送入 MDR<br>(PC)-&gt;MDR</li><li>CU 控制将中断服务程序的入口地址送入 PC(由向量地址形成部件产生 )<br>向量地址-&gt;PC</li></ol><p><span id="指令执行方案"></span></p><h2 id="指令执行方案"><a href="#指令执行方案" class="headerlink" title="指令执行方案"></a>指令执行方案</h2><ul><li>单指令周期<ul><li>所有指令的周期相同</li><li>指令之间串行执行</li><li>指令周期取决于执行时间最长的指令的执行时间</li><li>会拖慢执行快额度指令的执行速度, 导致整个系统运行速度降低</li></ul></li><li>多指令周期<ul><li>对不同类型的指令选用不同的执行步骤来完成</li><li>指令之间串行执行</li><li>可选用不同个数的时钟周期来完成不同的指令</li><li>需要更复杂的硬件设计</li></ul></li><li>流水线方案<ul><li>在每一个时钟周期内启动一条指令</li><li>尽量多条指令同时运行, 但各自处于不同的执行步骤中</li><li>指令之间并行执行</li></ul></li></ul><p><span id="数据通路（高频考）"></span></p><h1 id="数据通路-高频考"><a href="#数据通路-高频考" class="headerlink" title="数据通路(高频考)"></a>数据通路(高频考)</h1><p>数据在各功能部件之间传送的路径</p><blockquote><ol><li><strong>内部总线</strong>指同一部件, 如 CPU 内部连接各寄存器及运算部件之间的总线</li><li><strong>系统总线</strong>指同一台计算机系统的各部件,如 CPU,内存,通道和各类 I/O 接口间相互连接的总线</li><li>Bus 指的是 CPU 内部总线</li></ol></blockquote><ul><li>数据通路的结构<ol><li>CPU 内部单总线方式<br>同一时间只能支持一个数据交换</li><li>CPU 内部多总线方式<br>同一时间可以有多个数据交换</li><li>专用数据通路方式<br>部件之间有专门的数据通路</li></ol></li></ul><p><code>注意一定要表明控制信号</code><br><code>也要注意题目给出的部件中控制信号的位置,根据位置来选择正确的控制信号</code></p><p><span id="CPU内部总线方式"></span></p><h2 id="CPU-内部总线方式"><a href="#CPU-内部总线方式" class="headerlink" title="CPU 内部总线方式"></a>CPU 内部总线方式</h2><p><span id="寄存器之间的数据传送"></span></p><h3 id="寄存器之间的数据传送"><a href="#寄存器之间的数据传送" class="headerlink" title="寄存器之间的数据传送"></a>寄存器之间的数据传送</h3><p>例如 将 PC 内容送到 MAR, 流程及控制信号:<br>(PC)-&gt;Bus ($PC_{out}$有效,表示 PC 内容传送到总线)<br>Bus-&gt;MAR ($MAR_{in}$有效,表示总线内容写道 MAR)</p><blockquote><p>也可记为(PC)-&gt;Bus-&gt;MAR</p></blockquote><p><span id="主存与CPU之间数据传送"></span></p><h3 id="主存与-CPU-之间数据传送"><a href="#主存与-CPU-之间数据传送" class="headerlink" title="主存与 CPU 之间数据传送"></a>主存与 CPU 之间数据传送</h3><p>例如 CPU 从主存读取指令<br>(PC)-&gt;Bus-&gt;MAR ($PC_{out}$和$MAR_{in}$有效)(将现在的指令地址传送到 MAR)<br>1-&gt;R (CU 发读命令,通过控制总线发出)<br>MEM(MAR)-&gt;MDR ($MDR_{in}$有效)<br>MDR-&gt;Bus-&gt;IR ($MDR_{out}$,$IR_{in}$有效)</p><p><span id="执行算术或逻辑运算"></span></p><h3 id="执行算术或逻辑运算"><a href="#执行算术或逻辑运算" class="headerlink" title="执行算术或逻辑运算"></a>执行算术或逻辑运算</h3><p>例如加法指令<br>Ad(IR)-&gt;Bus-&gt;MAR ($MDR_{out}$, $MAR_{in}$有效)<br>1-&gt;R CU 发出读命令<br>MEM(MAR)-&gt;数据线-&gt;MDR ($MDR_{in}$有效)<br>MDR-&gt;Bus-&gt;Y ($MDR_{out}$, $ALU_in$有效)操作数-&gt;Y<br>(ACC) + (Y)-&gt;Z ($ACC_{out}$,$ALU_{in}$有效)CU 向 ALU 发送加命令<br>Z-&gt;ACC ($Z_{out}$,$ACC_{in}$有效) 结果-&gt;ACC</p><p><span id="例题"></span></p><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p><img src="/COP-COP-5/CPU%E5%8D%95%E6%80%BB%E7%BA%BF%E4%BE%8B%E9%A2%98.jpg" alt="例题"></p><ol><li>分析指令的功能和指令周期<br>(($R_0$)) + ($R_1$)-&gt;$(R_0$)<br>有取址周期, 间址周期, 执行周期</li><li>写出各阶段的指令流程<br>1-4 为取址周期: 公共操作<br>5-7 为间址周期: 完成取数操作,被加数在主存中,加数已经放在寄存器$R_1$中<br>8-10 为执行周期: 完成取数操作,被加数在主存中,加数已经放在寄存器$R_1$中</li></ol><table><thead><tr><th align="left">时序</th><th align="left">微操作</th><th align="left">有效控制信号</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">$(PC)-&gt;MAR$</td><td align="left">$PC_{out}, MAR_{in}$</td></tr><tr><td align="left">2</td><td align="left">$M(MAR)-&gt;MDR$,$(PC)+1-&gt;PC$</td><td align="left">$MemR,MAR_{out},MDR_{in}E$</td></tr><tr><td align="left">3</td><td align="left">$(MDR)-&gt;IR$</td><td align="left">$MDR_{out},IR_{in}$</td></tr><tr><td align="left">4</td><td align="left">$指令译码$</td><td align="left"></td></tr><tr><td align="left">5</td><td align="left">$(R_0)-&gt;MAR$</td><td align="left">$R0_{out},MAR_{in}$</td></tr><tr><td align="left">6</td><td align="left">$M(MAR)-&gt;MDR$</td><td align="left">$MemR,MAR_{out},MDR_{in}E$</td></tr><tr><td align="left">7</td><td align="left">$(MDR)-&gt;Y$</td><td align="left">$MDR_{out},Y_{in}$</td></tr><tr><td align="left">8</td><td align="left">$(R_1)+(Y)-&gt;Z$</td><td align="left">$R1_{out},ALU_{in}$,CU 向 ALU 发 ADD 控制信号</td></tr><tr><td align="left">9</td><td align="left">$(Z)-&gt;MDR$</td><td align="left">$Z_{out},MDR_{in}$</td></tr><tr><td align="left">10</td><td align="left">$(MDR)-&gt;M(MAR)$</td><td align="left">$MemW,MDR_{out}E,MAR_{out}$</td></tr></tbody></table><p><span id="专用通路方式"></span></p><h2 id="专用通路方式"><a href="#专用通路方式" class="headerlink" title="专用通路方式"></a>专用通路方式</h2><p>部件之间有专门的数据通路</p><p><span id="取指周期"></span></p><h3 id="取指周期"><a href="#取指周期" class="headerlink" title="取指周期"></a>取指周期</h3><div align="center"><p><img src="/COP-COP-5/%E4%B8%93%E7%94%A8%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F.jpg" alt="专用数据通路的取指周期"></p></div><blockquote><p>MDR 与主存可以双向传输数据, MAR 单向传输到 IR<br>MAR 单向向主存传输数据<br>PC 单向传输到 MAR<br>IR 单向传输到 PC 和微操作信号发生器</p></blockquote><p><span id="控制器设计"></span></p><h1 id="控制器设计"><a href="#控制器设计" class="headerlink" title="控制器设计"></a>控制器设计</h1><ul><li>硬部件控制器</li><li>微程序控制器</li></ul><p><span id="硬部件控制器"></span></p><h2 id="硬部件控制器"><a href="#硬部件控制器" class="headerlink" title="硬部件控制器"></a>硬部件控制器</h2><blockquote><ul><li>设计步骤</li></ul><blockquote><ol><li>分析每个阶段的微操作序列(取指, 间址, 执行, 中断)<br>确定哪些指令在什么阶段,什么条件下使用哪些微操作</li><li>选择 CPU 的控制方式<br>选择定长机器周期或不定长机器周期(每个机器周期安排多少时钟周期)</li><li>安排微操作时序<br>根据第一步得到的信息将微操作安排在时钟周期内</li><li>电路设计<br>每个微命令对应的逻辑表达式并用电路实现</li></ol></blockquote></blockquote><blockquote><ul><li>设计原则<blockquote><ol><li>微操作的先后顺序不能随意改变</li><li>被控对象不同的微操作尽量安排在一个节拍内完成</li><li>占用时间较端的微操作尽量安排在一个节拍内完成, 并允许右先后顺序</li></ol></blockquote></li></ul></blockquote><p><span id="特点"></span></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li>指令越多, 设计和实现越复杂<br>因此一般用于 RISC(精简指令集系统)</li><li>扩充指令困难<br>如果扩充一条新指令, 则控制器的设计需要大改</li><li>执行速度快<br>使用纯硬件实现<br>微操作控制信号由组合逻辑电路即时产生</li></ol><p><span id="微程序控制器"></span></p><h2 id="微程序控制器"><a href="#微程序控制器" class="headerlink" title="微程序控制器"></a>微程序控制器</h2><p>微程序由微指令序列组成, <strong>每一种指令对应一个微程序</strong></p><blockquote><p>指令指对程序执行步骤的描述<br>微指令是对指令执行步骤的描述<br>一个微指令中可能包含多个微操作<br>微命令与微操作一一对应<br>所有微程序和微指令存放在控制器存储器中<br>微周期(微指令周期): 从控制存储器中取出一条微指令并执行相应的微操作所需的时间</p></blockquote><ul><li>微指令的基本格式<br>微指令由<strong>操作控制</strong>和<strong>顺序控制</strong>字段组成<br>操作控制字段指明需要执行那几个微操作<br>顺序控制指明下一条微指令的地址</li></ul><p><span id="微程序控制器的基本结构（常考）"></span></p><h3 id="微程序控制器的基本结构-常考"><a href="#微程序控制器的基本结构-常考" class="headerlink" title="微程序控制器的基本结构(常考)"></a>微程序控制器的基本结构(常考)</h3><ul><li>微地址形成部件<br>产生初始微地址和后继微地址<br>保证微指令的连续执行</li><li>控制存储器 CM<br>用于存放各指令对应的微程序<br>控制存储器可用只读存储器 ROM 构成<blockquote><p>按地址寻访</p></blockquote></li><li>CMAR(微地址寄存器)<br>接收微地址形成部件送来的微地址<br>为在 CM 中读取微指令做准备<blockquote><p>功能与 PC 差不多</p></blockquote></li><li>CMDR<br>用于存放从 CM 中取出的微指令<br>位数同微指令字长<blockquote><p>相当于 IR</p></blockquote></li><li>地址译码<br>将地址转化为存储单元控制信号</li><li>顺序逻辑<br>控制微指令的执行顺序</li></ul><p><span id="微程序控制器的工作流程"></span></p><h3 id="微程序控制器的工作流程"><a href="#微程序控制器的工作流程" class="headerlink" title="微程序控制器的工作流程"></a>微程序控制器的工作流程</h3><ol><li>CPU 将指令的操作码送给微地址形成部件<br>确定微指令序列的起始地址</li><li>根据顺序逻辑的标志为, 确定微指令的存放地址</li><li>将要执行的微指令的微地址存放到 CMAR 中,</li><li>经过地址译码, 选中 CMAR 指向的微指令</li><li>取出该微指令,存放到 CMDR 中</li><li>将微指令中的顺序控制字段送到顺序逻辑部件中, 用于控制下一条要执行的微指令<br>将微指令中的操作控制字段向 CPU 内部和系统总线发出控制信号</li></ol><blockquote><p>取址周期,间址周期,中断周期中一样的微指令序列可用共享使用<br>取址周期,间址周期,中断周期对应的微程序段通常是公用的; 执行周期的各不相同<br>(若有 n 条机器指令, 则 CM 中微程序的个数至少是 n+1 个)<br>部分 CPU 可不提供间接寻址和中断功能(不包含间址周期和中断周期)<br>一条指令对应一个微程序</p></blockquote><p><span id="微指令的设计"></span></p><h3 id="微指令的设计"><a href="#微指令的设计" class="headerlink" title="微指令的设计"></a>微指令的设计</h3><blockquote><p>微命令与微操作一一对应<br>一个微命令对应一根输出线<br>一条微指令包含多个微命令(让多个微命令并行执行)</p></blockquote><p><span id="微指令的格式"></span></p><h3 id="微指令的格式"><a href="#微指令的格式" class="headerlink" title="微指令的格式"></a>微指令的格式</h3><blockquote><p>相容性微命令: 可以并行完成的微命令<br>互斥性微命令: 不能并行完成的微命令</p></blockquote><ul><li><p><strong>水平型微指令</strong><br>一条微指令定义<strong>多个</strong>可并行的微命令</p><ul><li>完成某一功能所需的微指令的数量少, 执行速度快</li><li>微指令长, 编写微程序较困难</li></ul><div align="center"><p><img src="/COP-COP-5/%E6%B0%B4%E5%B9%B3%E5%9E%8B%E5%BE%AE%E5%91%BD%E4%BB%A4.jpg" alt="水平型微命令"></p></div></li><li><p><strong>垂直型微指令</strong><br>一条微指令只能定义<strong>一个</strong>微命令<br>由微操作码规定具体功能</p><ul><li>微指令短, 简单, 规整, 便于编写微程序</li><li>完成某一功能所需的微指令的数量多, 执行速度慢, 工作效率低</li></ul><div align="center"><p><img src="/COP-COP-5/%E5%9E%82%E7%9B%B4%E5%9E%8B%E5%BE%AE%E6%8C%87%E4%BB%A4.jpg" alt="垂直型微指令"></p></div></li><li><p>混合型微指令<br>在垂直型微指令的基础上增加一些不复杂的并行操作</p><ul><li>指令较端, 仍然便于编写</li><li>完成某一功能所需的微指令所需的数量不多, 执行速度较快</li></ul></li></ul><p><span id="微指令的编码方式（常考）"></span></p><h3 id="微指令的编码方式-常考"><a href="#微指令的编码方式-常考" class="headerlink" title="微指令的编码方式(常考)"></a>微指令的编码方式(常考)</h3><blockquote><p>目标: 保证速度的情况下, 缩短微指令字长<br>以水平型微指令为例</p></blockquote><p><span id="直接编码（直接控制）方式（常考）"></span></p><ul><li><h4 id="直接编码-直接控制-方式-常考"><a href="#直接编码-直接控制-方式-常考" class="headerlink" title="直接编码(直接控制)方式(常考)"></a>直接编码(直接控制)方式(常考)</h4><p>在微指令的控制字段中, 每一位代表一个微操作命令<br>控制字段的某一位为<code>1</code>, 表示该控制信号有效</p><ul><li>简单, 直观, 执行速度快, 操作并行好</li><li>指令字长过长, n 个微命令需要 n 位的操作控制字段</li></ul></li></ul><p><span id="字段直接编码"></span></p><ul><li><h4 id="字段直接编码"><a href="#字段直接编码" class="headerlink" title="字段直接编码"></a>字段直接编码</h4><p>将微指令的控制字段分成若干段<br>每段译码后发出控制信号</p><ul><li>分段原则<ol><li>互斥性微命令在同一段<br>相容性微命令在不同段</li><li>每段的信息位尽量少<br>降低译码线路的复杂性和译码时间</li><li>每小段留出一个状态<br>表示本字段不发出任何微命令<blockquote><p>字段长度为<code>n</code>, 至多能表示 $2^{n-1}$ 个互斥微命令</p></blockquote></li></ol></li><li>可以缩短微指令字长</li><li>需要译码后在发出微命令, 比直接编码方式更慢<div align="center"></div></li></ul><p><img src="/COP-COP-5/%E5%AD%97%E6%AE%B5%E7%9B%B4%E6%8E%A5%E7%BC%96%E7%A0%81.jpg" alt="字段直接编码"></p></li></ul><p><span id="字段间接编码（隐式编码）"></span></p><ul><li><h4 id="字段间接编码-隐式编码"><a href="#字段间接编码-隐式编码" class="headerlink" title="字段间接编码(隐式编码)"></a>字段间接编码(隐式编码)</h4>一个字段的某些微命令需由另一个字段中的某些微命令来解释<br>(不是靠字段直接译码发出的微命令)<ul><li>进一步的缩短微指令字长</li><li>减弱了微指令的并行控制能力<br>长作为字段直接编码的辅助手段</li></ul></li></ul><p><span id="微指令的地址形成方式"></span></p><h3 id="微指令的地址形成方式"><a href="#微指令的地址形成方式" class="headerlink" title="微指令的地址形成方式"></a>微指令的地址形成方式</h3><blockquote><p>常考由微指令的下地址字段指出和增量计数法</p></blockquote><ol><li>由微指令的下地址字段指出(断定法)(常考)<br>指出微指令格式中设置下一个地址字段<br>由微指令的下地址字段直接指出后继微指令的地址<br>也被称为<strong>断定方式</strong></li><li>根据机器指令的操作码形成<br>机器指令取至指令寄存器后, 微指令的地址由操作码经微地址形成部件形成</li><li>增量计数法<br>(CMAR) + 1 -&gt; CMAR</li><li>分支转移<br>指明判断条件, 条件成立则转移待指明的转移地址</li><li>通过测试网络</li><li>由硬件产生微程序入口地址</li></ol><p><span id="微程序控制单元的设计"></span></p><h3 id="微程序控制单元的设计"><a href="#微程序控制单元的设计" class="headerlink" title="微程序控制单元的设计"></a>微程序控制单元的设计</h3><blockquote><p>微指令执行完后, 需要花一个时钟周期将下一条 指令地址(不同方式)放到 CMAR</p></blockquote><ul><li>设计步骤<ol><li>分析每个阶段的微操作序列</li><li>写出对应机器指令的微操作命令及时钟周期安排<br>写出每个周期内所需的微操作(参照硬布线)<br>补充微程序控制器特有的操作<blockquote><p>取址周期 Ad(CMAR)-&gt;CMAR, OP(IR)-&gt;微地址形成部件-&gt;CMAR<br>执行周期 Ad(CMDR)-&gt;CMAR</p></blockquote></li><li>确定微指令格式<br>根据微操作的个数, 选择编码方式, 确定微指令操作控制字段的位数<br>根据 CM 中存储的微指令总数, 确定微指令的顺序控制字段的位数<br>按照操作控制字段位数和顺序控制字段位数确定微指令字长</li><li>编写微指令码点<br>根据操作控制字段每一位代码的微操作命令, 编写每一条微指令的码点</li></ol></li></ul><p><span id="微程序设计的分类"></span></p><h3 id="微程序设计的分类"><a href="#微程序设计的分类" class="headerlink" title="微程序设计的分类"></a>微程序设计的分类</h3><ol><li>静态微程序设计和动态微程序设计</li></ol><ul><li>静态<br>微程序无需改改变, 采用 ROM</li><li>动态<br>通过改变微指令和微程序改变机器指令<br>有利于仿真, 采用 EPROM</li></ul><ol start="2"><li>豪微程序设计<br>用豪微程序解释微程序</li></ol><p><span id="硬布线与微程序比较（常考）"></span></p><h2 id="硬布线与微程序比较-常考"><a href="#硬布线与微程序比较-常考" class="headerlink" title="硬布线与微程序比较(常考)"></a>硬布线与微程序比较(常考)</h2><div class="table-overflow"><table><thead><tr><th align="left"></th><th align="left">微程序控制器</th><th align="left">硬布线</th></tr></thead><tbody><tr><td align="left">工作原理</td><td align="left">微操作控制信号以微程序的形式存放在控制存储器中, 执行指令时读出即可</td><td align="left">微操作控制信号由逻辑组合电路根据当前的指令码,状态和时序即时产生</td></tr><tr><td align="left">执行速度</td><td align="left">慢</td><td align="left">快</td></tr><tr><td align="left">规整性</td><td align="left">较规整</td><td align="left">繁琐, 不规则</td></tr><tr><td align="left">应用场合</td><td align="left">CISC CPU</td><td align="left">RISC CPU</td></tr><tr><td align="left">扩充性</td><td align="left">易扩充修改</td><td align="left">很难扩充修改</td></tr></tbody></table></div><p><span id="指令流水线"></span></p><h1 id="指令流水线"><a href="#指令流水线" class="headerlink" title="指令流水线"></a>指令流水线</h1><ol><li><p>顺序执行方式</p><blockquote><p>传统冯诺依曼机采用顺序执行方式(串行执行方式)</p></blockquote><p>$$总耗时T=n条指令\times 每条指令执行的时间$$</p><ul><li>优点<br>控制简单, 硬件代价小</li><li>缺点<br>执行指令的速度慢<br>在任何时刻, 处理机中只有一条指令在执行<br>各功能部件的利用率低</li></ul></li></ol><div align="center"><p><img src="/COP-COP-5/%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg" alt="顺序执行方式"></p></div><ol start="2"><li>一次重叠执行方式<br>$$总耗时T=每条指令执行的时间\times (1+2n)$$<ul><li>优点<br>程序的执行时间缩短了$\frac{1}{3}$<br>各功能部件的利用率提高</li><li>缺点<br>需要付出硬件上较大的开销代价<br>控制过程比顺序执行复杂</li></ul></li></ol><div align="center"><p><img src="/COP-COP-5/%E4%B8%80%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg" alt="一次重叠执行方式"></p></div><ol start="3"><li><p>二次重叠方式<br>$$总耗时T=每条指令执行的时间\times (2+n)$$</p><ul><li>优点<br>指令的执行时间缩短$\frac{2}{3}$<br>正常情况下, 处理机中同时执行 3 条指令</li><li>缺点</li></ul></li></ol><div align="center"><p><img src="/COP-COP-5/%E4%BA%8C%E6%AC%A1%E9%87%8D%E5%8F%A0%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg" alt="二次重叠执行方式"></p></div><ul><li><p>流水线的表示方式</p><div align="center"><p><img src="/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F.jpg" alt="流水线的表示方式"></p></div>指令执行过程图主要用于分析指令执行过程及影响流水线的因素<p>时空图主要用于分析流水线的性能</p></li></ul><p><span id="性能指标"></span></p><h2 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h2><blockquote><p>装入时间: 各个部件都<strong>开始</strong>工作所需的时间<br>排空时间: 各个部件都<strong>停止</strong>工作所需的时间</p><div align="center"><p><img src="/COP-COP-5/%E8%A3%85%E5%85%A5%E6%97%B6%E9%97%B4%E6%8E%92%E7%A9%BA%E6%97%B6%E9%97%B4.jpg" alt="装入时间排空时间"></p></div></blockquote><ol><li>吞吐率<br>单位时间内流水线完成的指令数量(输出结果的数量)<br>$$吞吐率=\frac{执行的指令数量}{所花费的时间}$$</li><li>加速比<br>完成同样数量的任务, 不使用流水线所用的时间与使用流水线随用的时间的比值<br>$$加速比=\frac{不使用流水线所需的时间}{使用流水线所需的时间}$$</li><li>效率<br>流水线设备的利用率(硬件设备处于忙碌的时间占总时间的比例)<br>$$流水线效率=\frac{n个任务占用k时空区的有效面积}{n个任务所用的时间与看个流水线所围成的时空区总面积}$$<blockquote><p>相当于下图的$$\frac{蓝色框减红色框面积}{红色框面积}$$<br>或者$$\frac{有数字的块的面积}{空白块面积+有数字块面积}$$</p><div align="center"><p><img src="/COP-COP-5/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%95%88%E7%8E%87%E5%9B%BE.jpg" alt="流水线效率图"></p></div></blockquote></li></ol><p><span id="指令流水线的影响因素（常考数据冲突）"></span></p><h2 id="指令流水线的影响因素-常考数据冲突"><a href="#指令流水线的影响因素-常考数据冲突" class="headerlink" title="指令流水线的影响因素(常考数据冲突)"></a>指令流水线的影响因素(常考数据冲突)</h2><div class="table-overflow"><table><thead><tr><th align="left">影响因素</th><th align="left">原因</th><th align="left">解决方法</th></tr></thead><tbody><tr><td align="left">结构相关(资源冲突)</td><td align="left">由于多条指令在同一时刻争用同一资源而形成的冲突</td><td align="left">1. 后一相关指令暂停一周期<br>2.资源重复配置(例如将指令和数据分别放到不同的存储器中</td></tr><tr><td align="left">数据相关(数据冲突)</td><td align="left">必须等待前一条指令执行完成后才能执行后一条指令</td><td align="left">1. 等待若干个周期, 直到数据冲突问题消失后在执行; 分为硬件阻塞(stall)和软件插入(NOP)(插入空指令);<br>2.数据旁路技术(转发机制), 在结果运算出来后直接使用;<br>3. 编译优化:通过编译器调整指令顺序来解决数据冲突</td></tr><tr><td align="left">控制相关(控制冲突)</td><td align="left">遇到转移指令和其他改变 PC 值的指令造成断流</td><td align="left">1.转移指令分支预测: 简单预测(永远猜转移或不转移),动态预测(根据历史情况动态调整);<br>2. 预取转移成功和不成功两个控制流方向上的目标指令;<br>3. 加快和提前形成条件码;<br>4.调高转移预测的准确率</td></tr></tbody></table></div><p><span id="流水线的分类"></span></p><h2 id="流水线的分类"><a href="#流水线的分类" class="headerlink" title="流水线的分类"></a>流水线的分类</h2><p><span id="部件功能级,处理机级和处理机间级流水线"></span></p><h3 id="部件功能级-处理机级和处理机间级流水线"><a href="#部件功能级-处理机级和处理机间级流水线" class="headerlink" title="部件功能级,处理机级和处理机间级流水线"></a>部件功能级,处理机级和处理机间级流水线</h3><p>根据流水线使用的级别进行分类</p><ol><li>部件功能级流水线<br>将复杂的算术逻辑运算组成流水线工作方式<blockquote><p>例如将浮点加法操作分成求阶差, 对阶, 尾数相加,结果规格化 4 个子过程</p></blockquote></li><li>处理机级流水线<br>把一条指令解释过程分为多个子程序<blockquote><p>将处理机划为多个部分</p></blockquote></li><li>处理机间级流水线<br>每一个处理机完成某一专门任务, 各个处理机所得到的结果存放在下一个处理机所共享的存储器中<blockquote><p>多个处理机共同解决一个问题</p></blockquote></li></ol><p><span id="单功能流水线和多功能流水线"></span></p><h3 id="单功能流水线和多功能流水线"><a href="#单功能流水线和多功能流水线" class="headerlink" title="单功能流水线和多功能流水线"></a>单功能流水线和多功能流水线</h3><p>根据流水线可以完成的功能进行分类</p><ol><li>单功能流水线<br>只能实现一种固定的专门功能</li><li>多功能流水线<br>通过各段间的不同连接方式可以同时或不同时地实现多种功能的流水线</li></ol><p><span id="动态流水线和静态流水线"></span></p><h3 id="动态流水线和静态流水线"><a href="#动态流水线和静态流水线" class="headerlink" title="动态流水线和静态流水线"></a>动态流水线和静态流水线</h3><p>根据同一时间内各段之间的连接方式进行分类</p><ol><li>静态流水线<br>同一时间内, 流水线的各段只能按一种功能的连接方式工作</li><li>动态流水线<br>同一时间内, 某些段在实现某种运算时, 另一些段在进行另一种运算<blockquote><p>提高流水线的效率, 但是流水线的控制变得复杂</p></blockquote></li></ol><p><span id="线性流水线和非线性流水线"></span></p><h3 id="线性流水线和非线性流水线"><a href="#线性流水线和非线性流水线" class="headerlink" title="线性流水线和非线性流水线"></a>线性流水线和非线性流水线</h3><p>根据流水线的各个功能段之间是否有反馈信号进行分类</p><ol><li>线性流水线<br>从输入到输出, 每个功能段只允许经过一次, 不存在反馈回路</li><li>非线性流水线<br>存在反馈回路, 从输入大输出过程中, 某些功能段将数次通过流水线<blockquote><p>适合进行线性递归运算</p></blockquote></li></ol><p><span id="流水线的多发技术"></span></p><h2 id="流水线的多发技术"><a href="#流水线的多发技术" class="headerlink" title="流水线的多发技术"></a>流水线的多发技术</h2><p><span id="超标量技术"></span></p><h3 id="超标量技术"><a href="#超标量技术" class="headerlink" title="超标量技术"></a>超标量技术</h3><p>每个时钟周期内可以并发多条独立指令(一次性执行多条指令)<br>要配置多个功能部件(对应一次性可以执行多少条指令)<br>不能调整指令的执行顺序<br>通过编译优化技术, 把可以并行执行的指令搭配起来</p><div align="center"><p><img src="/COP-COP-5/%E8%B6%85%E6%A0%87%E9%87%8F%E6%8A%80%E6%9C%AF.jpg" alt="超标量技术"></p></div><p><span id="超流水技术"></span></p><h3 id="超流水技术"><a href="#超流水技术" class="headerlink" title="超流水技术"></a>超流水技术</h3><p>在一个时钟周期内在分段(时分复用)<br>一个时钟周期内一个功能部件使用多次(每条指令在一个时钟周期片段内执行)<br>不能调整指令的执行顺序<br>靠编译程序优化问题</p><div align="center"><p><img src="/COP-COP-5/%E8%B6%85%E6%B5%81%E6%B0%B4%E6%8A%80%E6%9C%AF.jpg" alt="超流水技术"></p></div><p><span id="超长指令字"></span></p><h3 id="超长指令字"><a href="#超长指令字" class="headerlink" title="超长指令字"></a>超长指令字</h3><p>由编译程序寻找出指令间潜在的并行性, 将多条能并行的指令组合成一条具有多个操作码字段的超长指令字<br>采用多个处理部件</p><div align="center"><p><img src="/COP-COP-5/%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97.jpg" alt="超长指令字"></p></div><p><span id="五段式指令流水线（考试题目分析）"></span></p><h2 id="五段式指令流水线-考试题目分析"><a href="#五段式指令流水线-考试题目分析" class="headerlink" title="五段式指令流水线(考试题目分析)"></a>五段式指令流水线(考试题目分析)</h2><ul><li>五段式机器周期:IF(取址),ID(指令译码),EX(执行指令),M(访存阶段),WB(结果写回)</li><li>为方便流水线设计, 每个阶段的耗时一致, 以耗时最长的为准</li><li>流水线每个功能段后有一个<strong>缓存寄存器(锁存器)</strong>, 作用是保存本流水线的执行结果,提供给下一流水线使用</li><li>只有当上一条指令进入 ID 段后, 下一条指令才能进入 IF 段, 否则会覆盖 IF 段锁存器的内容(以此类推)</li></ul><div align="center"><p><img src="/COP-COP-5/%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA.jpg" alt="机器周期图示"></p></div><blockquote><p>考试中常见的指令<br>以 RISC 指令集说明</p></blockquote><p><span id="运算类指令"></span></p><h3 id="运算类指令"><a href="#运算类指令" class="headerlink" title="运算类指令"></a>运算类指令</h3><blockquote><p>ADD Rs,Rd<br>$$(Rs)+(Rd)-&gt;Rd$$<br>ADD #996,Rd<br>$$ 996+(Rd)-&gt;Rd $$<br>SHL Rd<br>$$(Rd)&lt;&lt;&lt;2-&gt;Rd$$</p></blockquote><ol><li>IF<br>根据 PC 从指令 Cache 取指令至 IF 段的锁存器</li><li>ID<br>取出操作数至 ID 段锁存器</li><li>EX<br>运算, 将结果写入 EX 段锁存器</li><li>M<br>空段<blockquote><p>RISC 指令集的运算类指令操作数都来自于寄存器</p></blockquote></li><li>WB<br>将运算结果写回指定寄存器</li></ol><p><span id="LOAD指令"></span></p><h3 id="LOAD-指令"><a href="#LOAD-指令" class="headerlink" title="LOAD 指令"></a>LOAD 指令</h3><blockquote><p>LOAD Rd,99(Rs)<br>$$(996+(Rs))-&gt;Rd$$<br>LOAD Rd,mem<br>$$(mem)-&gt;Rd$$</p></blockquote><ol><li>IF<br>根据 PC 从指令 Cache 取指令至 IF 段的锁存器</li><li>ID<br>将基址寄存器的值放到锁存器 A<br>将偏移量的值放到锁存器</li><li>EX<br>得到有效地址</li><li>M<br>从数据 Cache 中取数并放入锁存器</li><li>WB<br>将取出的数写回寄存器</li></ol><p><span id="STORE指令"></span></p><h3 id="STORE-指令"><a href="#STORE-指令" class="headerlink" title="STORE 指令"></a>STORE 指令</h3><blockquote><p>STORE Rs,996(Rd)<br>$$Rs-&gt;(996+(Rd))$$<br>STORE Rs,mem<br>$$Rs-&gt;(mem)$$</p></blockquote><ol><li>IF<br>根据 PC 从指令 Cache 取指令至 IF 段的锁存器</li><li>ID<br>将基址寄存器的值放到锁存器 A<br>将偏移量的值放到锁存器<br>将要存的数放到 B</li><li>EX<br>得到有效地址, 将锁存器 B 的内容放到锁存器</li><li>M<br>写入数据 Cache</li><li>WB<br>空段</li></ol><p><span id="条件转移指令"></span></p><h3 id="条件转移指令"><a href="#条件转移指令" class="headerlink" title="条件转移指令"></a>条件转移指令</h3><blockquote><p>beq Rs,Rt,#偏移量</p><p>$$<br>若(Rs)==(Rt)\\<br>则(PC)+(指令字长)+(偏移量\times 指令字长)-&gt;PC\\<br>否则(PC)+指令字长-&gt;PC<br>$$</p><p>bne Rs,Rt,#偏移量</p><p>$$<br>若(Rs)!=(Rt)\\<br>则(PC)+(指令字长)+(偏移量\times 指令字长)-&gt;PC\\<br>否则(PC)+指令字长-&gt;PC<br>$$</p></blockquote><ol><li>IF<br>根据 PC 从指令 Cache 取指令至 IF 段的锁存器</li><li>ID<br>进行比较的两个数放入锁存器 A,B<br>偏移量放入锁存器</li><li>EX<br>运算, 比较两个数</li><li>M<br>将目标 PC 值写回 PC</li><li>WB<br>空段</li></ol><p><span id="无条件转移指令"></span></p><h3 id="无条件转移指令"><a href="#无条件转移指令" class="headerlink" title="无条件转移指令"></a>无条件转移指令</h3><blockquote><p>jmp #偏移量<br>$$(PC)+指令字长+(偏移量\times 指令字长)-&gt;PC$$</p></blockquote><ol><li>IF<br>根据 PC 从指令 Cache 取指令至 IF 段的锁存器</li><li>ID<br>偏移量放入锁存器</li><li>EX<br>将目标 PC 值写回 PC</li><li>M<br>空段</li><li>WB<br>空段</li></ol></div><div class="article-licensing box"><div class="licensing-title"><p>计算机组成原理——中央处理器</p><p><a href="http://blog.cshf.xyz/COP-COP-5/">http://blog.cshf.xyz/COP-COP-5/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>CSHF</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-07-06</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-08-17</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Computer-Organization-Principles/">Computer Organization Principles</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/network-network1/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">计算机网络——基础知识</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/COP-COP-4/"><span class="level-item">计算机组成原理——指令系统</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="waline-thread"></div><script src="https://cdn.jsdelivr.net/npm/@waline/client@1.3.1/dist/Waline.min.js"></script><script>Waline({el:"#waline-thread",serverURL:"https://comment-33ock0yem-smallpigboy.vercel.app/",lang:"zh-CN",visitor:!1,emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],dark:"auto",meta:["nick","mail","link"],requiredMeta:[],login:"enable",avatar:"mp",pageSize:10,avatarCDN:"https://sdn.geekzu.org/avatar/",avatarForce:!1,highlight:!0,mathTagSupport:!1,copyright:!0,locale:{placeholder:"Comment here..."}})</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#目录"><span class="level-left"><span class="level-item">目录</span></span></a></li><li><a class="level is-mobile" href="#CPU-的功能与基本结构"><span class="level-left"><span class="level-item">CPU 的功能与基本结构</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#功能"><span class="level-left"><span class="level-item">功能</span></span></a></li><li><a class="level is-mobile" href="#组成"><span class="level-left"><span class="level-item">组成</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#运算器"><span class="level-left"><span class="level-item">运算器</span></span></a></li><li><a class="level is-mobile" href="#控制器"><span class="level-left"><span class="level-item">控制器</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#指令执行"><span class="level-left"><span class="level-item">指令执行</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#周期"><span class="level-left"><span class="level-item">周期</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#指令周期"><span class="level-left"><span class="level-item">指令周期</span></span></a></li><li><a class="level is-mobile" href="#机器周期"><span class="level-left"><span class="level-item">机器周期</span></span></a></li><li><a class="level is-mobile" href="#时钟周期"><span class="level-left"><span class="level-item">时钟周期</span></span></a></li><li><a class="level is-mobile" href="#指令周期流程"><span class="level-left"><span class="level-item">指令周期流程</span></span></a></li></ul></li><li><a class="level is-mobile" href="#指令执行方案"><span class="level-left"><span class="level-item">指令执行方案</span></span></a></li></ul></li><li><a class="level is-mobile" href="#数据通路-高频考"><span class="level-left"><span class="level-item">数据通路(高频考)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#CPU-内部总线方式"><span class="level-left"><span class="level-item">CPU 内部总线方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#寄存器之间的数据传送"><span class="level-left"><span class="level-item">寄存器之间的数据传送</span></span></a></li><li><a class="level is-mobile" href="#主存与-CPU-之间数据传送"><span class="level-left"><span class="level-item">主存与 CPU 之间数据传送</span></span></a></li><li><a class="level is-mobile" href="#执行算术或逻辑运算"><span class="level-left"><span class="level-item">执行算术或逻辑运算</span></span></a></li><li><a class="level is-mobile" href="#例题"><span class="level-left"><span class="level-item">例题</span></span></a></li></ul></li><li><a class="level is-mobile" href="#专用通路方式"><span class="level-left"><span class="level-item">专用通路方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#取指周期"><span class="level-left"><span class="level-item">取指周期</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#控制器设计"><span class="level-left"><span class="level-item">控制器设计</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#硬部件控制器"><span class="level-left"><span class="level-item">硬部件控制器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#特点"><span class="level-left"><span class="level-item">特点</span></span></a></li></ul></li><li><a class="level is-mobile" href="#微程序控制器"><span class="level-left"><span class="level-item">微程序控制器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#微程序控制器的基本结构-常考"><span class="level-left"><span class="level-item">微程序控制器的基本结构(常考)</span></span></a></li><li><a class="level is-mobile" href="#微程序控制器的工作流程"><span class="level-left"><span class="level-item">微程序控制器的工作流程</span></span></a></li><li><a class="level is-mobile" href="#微指令的设计"><span class="level-left"><span class="level-item">微指令的设计</span></span></a></li><li><a class="level is-mobile" href="#微指令的格式"><span class="level-left"><span class="level-item">微指令的格式</span></span></a></li><li><a class="level is-mobile" href="#微指令的编码方式-常考"><span class="level-left"><span class="level-item">微指令的编码方式(常考)</span></span></a></li><li><a class="level is-mobile" href="#微指令的地址形成方式"><span class="level-left"><span class="level-item">微指令的地址形成方式</span></span></a></li><li><a class="level is-mobile" href="#微程序控制单元的设计"><span class="level-left"><span class="level-item">微程序控制单元的设计</span></span></a></li><li><a class="level is-mobile" href="#微程序设计的分类"><span class="level-left"><span class="level-item">微程序设计的分类</span></span></a></li></ul></li><li><a class="level is-mobile" href="#硬布线与微程序比较-常考"><span class="level-left"><span class="level-item">硬布线与微程序比较(常考)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#指令流水线"><span class="level-left"><span class="level-item">指令流水线</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#性能指标"><span class="level-left"><span class="level-item">性能指标</span></span></a></li><li><a class="level is-mobile" href="#指令流水线的影响因素-常考数据冲突"><span class="level-left"><span class="level-item">指令流水线的影响因素(常考数据冲突)</span></span></a></li><li><a class="level is-mobile" href="#流水线的分类"><span class="level-left"><span class="level-item">流水线的分类</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#部件功能级-处理机级和处理机间级流水线"><span class="level-left"><span class="level-item">部件功能级,处理机级和处理机间级流水线</span></span></a></li><li><a class="level is-mobile" href="#单功能流水线和多功能流水线"><span class="level-left"><span class="level-item">单功能流水线和多功能流水线</span></span></a></li><li><a class="level is-mobile" href="#动态流水线和静态流水线"><span class="level-left"><span class="level-item">动态流水线和静态流水线</span></span></a></li><li><a class="level is-mobile" href="#线性流水线和非线性流水线"><span class="level-left"><span class="level-item">线性流水线和非线性流水线</span></span></a></li></ul></li><li><a class="level is-mobile" href="#流水线的多发技术"><span class="level-left"><span class="level-item">流水线的多发技术</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#超标量技术"><span class="level-left"><span class="level-item">超标量技术</span></span></a></li><li><a class="level is-mobile" href="#超流水技术"><span class="level-left"><span class="level-item">超流水技术</span></span></a></li><li><a class="level is-mobile" href="#超长指令字"><span class="level-left"><span class="level-item">超长指令字</span></span></a></li></ul></li><li><a class="level is-mobile" href="#五段式指令流水线-考试题目分析"><span class="level-left"><span class="level-item">五段式指令流水线(考试题目分析)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#运算类指令"><span class="level-left"><span class="level-item">运算类指令</span></span></a></li><li><a class="level is-mobile" href="#LOAD-指令"><span class="level-left"><span class="level-item">LOAD 指令</span></span></a></li><li><a class="level is-mobile" href="#STORE-指令"><span class="level-left"><span class="level-item">STORE 指令</span></span></a></li><li><a class="level is-mobile" href="#条件转移指令"><span class="level-left"><span class="level-item">条件转移指令</span></span></a></li><li><a class="level is-mobile" href="#无条件转移指令"><span class="level-left"><span class="level-item">无条件转移指令</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/App/"><span class="tag">App</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ClientIP/"><span class="tag">ClientIP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer-Organization-Principles/"><span class="tag">Computer Organization Principles</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DataStructure/"><span class="tag">DataStructure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/InformationLeakage/"><span class="tag">InformationLeakage</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kivy/"><span class="tag">Kivy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LKM/"><span class="tag">LKM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NetWork/"><span class="tag">NetWork</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PE/"><span class="tag">PE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WEB/"><span class="tag">WEB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2021-08-09T11:09:57.000Z">2021-08-09</time></p><p class="title"><a href="/COP-COP-7/">计算机组成原理——输入输出系统</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/Computer-Organization-Principles/">Computer Organization Principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-08-07T11:28:07.000Z">2021-08-07</time></p><p class="title"><a href="/COP-COP-6/">计算机组成原理——总线</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/Computer-Organization-Principles/">Computer Organization Principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-23T12:18:02.000Z">2021-07-23</time></p><p class="title"><a href="/network-network7/">计算机网络——应用层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-22T11:09:54.000Z">2021-07-22</time></p><p class="title"><a href="/network-network6/">计算机网络——传输层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-20T08:36:33.000Z">2021-07-20</time></p><p class="title"><a href="/network-network5/">计算机网络——网络层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/CSHF_LOGO.png" alt="CSHF" height="28"></a><p class="is-size-7"><span>&copy; 2021 CSHF</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load",()=>{window.cookieconsent.initialise({type:"info",theme:"edgeless",static:!1,position:"bottom-left",content:{message:"此网站使用Cookie来改善您的体验。",dismiss:"知道了！",allow:"允许使用Cookie",deny:"拒绝",link:"了解更多",policy:"Cookie政策",href:"https://www.cookiesandyou.com/"},palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}}})})</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script></body></html>