<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>计算机网络——传输层 - CSHF</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CSHF"><meta name="msapplication-TileImage" content="/img/logo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CSHF"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="计算机网络——传输层"><meta property="og:type" content="blog"><meta property="og:title" content="计算机网络——传输层"><meta property="og:url" content="https://blog.cshf.xyz/network-network6/"><meta property="og:site_name" content="CSHF"><meta property="og:description" content="计算机网络——传输层"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/tcphead.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/tcpconnect.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/tcpdisconnect.png"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/moreack.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/tcpdata.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/skortstart.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/quickresend.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/udphead.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/udpcheck1.jpg"><meta property="og:image" content="https://blog.cshf.xyz/network-network6/udpcheck2.jpg"><meta property="article:published_time" content="2021-07-22T11:09:54.000Z"><meta property="article:modified_time" content="2021-08-17T11:39:54.784Z"><meta property="article:author" content="CSHF"><meta property="article:tag" content="NetWork"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/network-network6/tcphead.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.cshf.xyz/network-network6/"},"headline":"CSHF","image":["https://blog.cshf.xyz/network-network6/tcphead.jpg","https://blog.cshf.xyz/network-network6/tcpconnect.jpg","https://blog.cshf.xyz/network-network6/tcpdisconnect.png","https://blog.cshf.xyz/network-network6/moreack.jpg","https://blog.cshf.xyz/network-network6/tcpdata.jpg","https://blog.cshf.xyz/network-network6/skortstart.jpg","https://blog.cshf.xyz/network-network6/quickresend.jpg","https://blog.cshf.xyz/network-network6/udphead.jpg","https://blog.cshf.xyz/network-network6/udpcheck1.jpg","https://blog.cshf.xyz/network-network6/udpcheck2.jpg"],"datePublished":"2021-07-22T11:09:54.000Z","dateModified":"2021-08-17T11:39:54.784Z","author":{"@type":"Person","name":"CSHF"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"计算机网络——传输层"}</script><link rel="canonical" href="https://blog.cshf.xyz/network-network6/"><link rel="icon" href="/img/logo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?f72d939143c49eed016fe7d2b8d84b57";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/CSHF_LOGO.png" alt="CSHF" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/CSHF-yhhhh"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-07-22T11:09:54.000Z" title="2021/7/22 下午7:09:54">2021-07-22</time>发表</span><span class="level-item"><time datetime="2021-08-17T11:39:54.784Z" title="2021/8/17 下午7:39:54">2021-08-17</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a><span> / </span><a class="link-muted" href="/categories/Note/NetWork/">NetWork</a></span><span class="level-item">30 分钟读完 (大约4564个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">计算机网络——传输层</h1><div class="content"><p>计算机网络——传输层</p><span id="more"></span><hr><h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ol><li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">基本概念</a><ol><li><a href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8A%9F%E8%83%BD">传输层功能</a></li><li><a href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E5%AF%BB%E5%9D%80%E5%92%8C%E7%AB%AF%E5%8F%A3">传输层的寻址和端口</a><ol><li><a href="#%E7%AB%AF%E5%8F%A3%EF%BC%88%E9%80%BB%E8%BE%91%E7%AB%AF%E5%8F%A3/%E8%BD%AF%E4%BB%B6%E7%AB%AF%E5%8F%A3%EF%BC%89">端口（逻辑端口/软件端口）</a></li></ol></li></ol></li><li><a href="#TCP%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%BC%A0%E9%80%81%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE">TCP 面向连接的传送控制协议</a><ol><li><a href="#%E7%89%B9%E7%82%B9">特点</a></li><li><a href="#TCP%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89">TCP 首部格式（重点）</a></li><li><a href="#TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86">TCP 连接管理</a><ol><li><a href="#TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%88%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%EF%BC%89">TCP 三次握手（建立连接）</a></li><li><a href="#TCP%E9%87%8A%E6%94%BE%E8%BF%9E%E6%8E%A5">TCP 释放连接</a></li></ol></li><li><a href="#TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93">TCP 可靠传输</a><ol><li><a href="#%E6%A0%A1%E9%AA%8C">校验</a></li><li><a href="#%E5%BA%8F%E5%8F%B7">序号</a></li><li><a href="#%E7%A1%AE%E8%AE%A4">确认</a></li><li><a href="#%E9%87%8D%E4%BC%A0">重传</a></li></ol></li><li><a href="#TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">TCP 流量控制</a></li><li><a href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">拥塞控制</a><ol><li><a href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E5%92%8C%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D">慢开始和拥塞避免</a><ol><li><a href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E5%8E%9F%E7%90%86">慢开始原理</a></li><li><a href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E5%8E%9F%E7%90%86">拥塞避免原理</a></li><li><a href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E5%92%8C%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%BB%93%E5%90%88">慢开始和拥塞避免结合</a></li></ol></li><li><a href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E5%92%8C%E5%BF%AB%E6%81%A2%E5%A4%8D">快重传和快恢复</a><ol><li><a href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E5%8E%9F%E7%90%86">快重传原理</a></li><li><a href="#%E5%BF%AB%E6%81%A2%E5%A4%8D%E5%8E%9F%E7%90%86">快恢复原理</a></li></ol></li></ol></li><li><a href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E7%9A%84%E5%8C%BA%E5%88%AB">拥塞控制与流量控制的区别</a></li></ol></li><li><a href="#UDP%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE">UDP 无连接的用户数据报协议</a><ol><li><a href="#%E7%89%B9%E7%82%B9">特点</a></li><li><a href="#UDP%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F">UDP 首部格式</a><ol><li><a href="#UDP%E6%A0%A1%E9%AA%8C">UDP 校验</a></li></ol></li></ol></li></ol><hr><p><span id="基本概念"></span></p><h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><blockquote><p>只有主机才有传输层及以上的层次</p></blockquote><p>传输层为应用层提供通信服务, 使用网络层的服务</p><p><span id="传输层功能"></span></p><h2 id="传输层功能"><a href="#传输层功能" class="headerlink" title="传输层功能"></a>传输层功能</h2><ol><li>提供进程之间的逻辑通信<blockquote><p>网络层提供的是主机之间的逻辑通信</p></blockquote></li><li>复用和分用<ul><li>复用<br>应用层所有的应用进程可以通过传输层在传输到网络层<blockquote><p>多个进程公用一个接口</p></blockquote></li><li>分用<br>传输层从网络层收到数据后交付给指明的应用进程</li></ul></li><li>对收到的报文进行差错检错</li></ol><p><span id="传输层的寻址和端口"></span></p><h2 id="传输层的寻址和端口"><a href="#传输层的寻址和端口" class="headerlink" title="传输层的寻址和端口"></a>传输层的寻址和端口</h2><p><span id="端口（逻辑端口/软件端口）"></span></p><h3 id="端口-逻辑端口-软件端口"><a href="#端口-逻辑端口-软件端口" class="headerlink" title="端口(逻辑端口/软件端口)"></a>端口(逻辑端口/软件端口)</h3><p>传输层的 SAP<br>用于标识目标主机中的应用进程</p><blockquote><p>路由器/交换机中与物理链路相连的叫硬件端口</p></blockquote><ul><li>端口号<ul><li>端口号只有本地意义(只在本主机生效), 网络中的不同计算机的端口之间没有任何关系</li><li>端口号长度<code>16bit</code>, 能标识 65535 个不同端口</li><li>熟知端口号<br>0~1023<br>TCP/IP 最重要的一些应用程序, 让所有用户都知道<blockquote><p>一般在服务器中使用</p></blockquote></li><li>登记端口号<br>1024~49151<br>为没有熟知端口号的应用程序使用</li><li>客户端口号<br>49152~65535<br>仅在客户进程运行时才动态选择(由操作系统分配)</li></ul></li></ul><div class="table-overflow"><table><thead><tr><th align="left">应用程序</th><th align="left">端口号</th></tr></thead><tbody><tr><td align="left">FTP</td><td align="left">21</td></tr><tr><td align="left">SSH</td><td align="left">22</td></tr><tr><td align="left">TELNET</td><td align="left">23</td></tr><tr><td align="left">SMTP</td><td align="left">25</td></tr><tr><td align="left">DNS</td><td align="left">53</td></tr><tr><td align="left">TFTP</td><td align="left">69</td></tr><tr><td align="left">HTTP</td><td align="left">80</td></tr><tr><td align="left">SNMP</td><td align="left">161</td></tr><tr><td align="left">HTTPS</td><td align="left">443</td></tr></tbody></table></div><blockquote><p>套接字={主机 IP 地址:端口号}<br>套接字唯一标识了网络中的一个主机和该主机上的进程</p></blockquote><p><span id="TCP面向连接的传送控制协议"></span></p><h1 id="TCP-面向连接的传送控制协议"><a href="#TCP-面向连接的传送控制协议" class="headerlink" title="TCP 面向连接的传送控制协议"></a>TCP 面向连接的传送控制协议</h1><p><strong>可靠,面向连接, 时延大,适用与大文件</strong></p><p><span id="特点"></span></p><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol><li>TCP 是面向连接(虚连接)的传输层协议<ul><li>传送数据之前,必须<strong>建立连接</strong></li><li>数据传送结束后,要<strong>释放连接</strong></li></ul></li><li>每一天 TCP 连接只能有 2 个端点<br>每一条 TCP 连接只能是点对点的</li><li>TCP 提供可靠交付的服务<br>无差错, 不丢失, 不重复, 按序到达</li><li>TCP 提供全双工通信<br>有发送缓存和接收缓存<ul><li>发送缓存<br>准备发送的数据<br>和<br>已发送但未收到确认的数据</li><li>接收缓存<br>按序到达但应用程序还未读取的数据<br>和<br>不按序到达的数据</li></ul></li><li>面向字节流<br>把应用层传来的数据看成一串<strong>无结构的字节流</strong><blockquote><p>流: 流入到程序 或 从进程流出的字节序列</p></blockquote></li></ol><p><span id="TCP首部格式（重点）"></span></p><h2 id="TCP-首部格式-重点"><a href="#TCP-首部格式-重点" class="headerlink" title="TCP 首部格式(重点)"></a>TCP 首部格式(重点)</h2><div align="center"><p><img src="/network-network6/tcphead.jpg" alt="TCP首部格式"></p></div><blockquote><p>TCP 连接传送的字节流中的每一个字节都按序号编号</p></blockquote><div class="table-overflow"><table><thead><tr><th align="left">字段名</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">序号</td><td align="left">该字段标识本报文段发送的数据的<strong>第一个字节的序号</strong></td></tr><tr><td align="left">确认号</td><td align="left"><strong>期望</strong>收到对方下一个报文段的第一个数据字节的序号;若确认号为 N, 则序号 N-1 之前的所有序号都已正确收到</td></tr><tr><td align="left">数据偏移</td><td align="left">4 位.表示 TCP 报文段的数据起始处距离 TCP 报文段的起始处有多远.以 32 bit 字(即 4 字节)为基本单位</td></tr><tr><td align="left">保留字段</td><td align="left">保留位今后使用,目前应置 0</td></tr><tr><td align="left">URG(紧急比特)</td><td align="left">为<code>1</code> 时,告诉系统此报文段中有紧急数据, 应尽快传送(相当于高优先级的数据) , 配合紧急指针使用 (在 TCP 发送缓存中最先发送,不管其位置在哪)</td></tr><tr><td align="left">ACK(确认比特)</td><td align="left">只有当 ACK =1 时<code>确认号</code>字段才有效.当 ACK = 0 时,<code>确认号</code>无 效</td></tr><tr><td align="left">PSH(推送比特)</td><td align="left">接收 TCP 收到推送比特置 1 的报文段, 就尽快地交付给接收应用进程, 而不再等到整个缓存都填满了后再向上交付</td></tr><tr><td align="left">RST(复位比特)</td><td align="left">为 <code>1</code> 时, 表明 TCP 连接中出现严重差错(如由于主机崩溃或其他原因), 必须释放连接, 然后再重新建立传输连接 (可有拒绝非法连接)</td></tr><tr><td align="left">SYN(同步比特)</td><td align="left">为 <code>1</code>时表示这是一个连接请求或连接接受报文</td></tr><tr><td align="left">FIN(终止比特)</td><td align="left">用来释放一个连接. 为<code>1</code> 时表明发送数据已发送完毕, 并要求释放传输连接</td></tr><tr><td align="left">窗口字段</td><td align="left">2 字节. 用来控制对方发送的数据量, 单位为字节. TCP 连接的一端根据设置的缓存空间大小确定自己的接收窗口大小, 然后通知对方以确定对方的发送窗口的上限</td></tr><tr><td align="left">校验和</td><td align="left">2 字节. 检验和字段检验的范围包括首部和数据这两部分. 在计算检验和时, 要在 TCP 报文段的前面加上 12 字节的伪首部</td></tr><tr><td align="left">紧急指针</td><td align="left">2 字节. 紧急指针指出在本报文段中的紧急数据的最后一个字节的序号</td></tr><tr><td align="left">选项字段</td><td align="left">长度可变. TCP 只规定了一种选项, 即最大报文段长度 MSS . 通知对方 TCP–”我的缓存所能接收的报文段的数据字段的最大长度是 MSS 个字节”</td></tr><tr><td align="left">填充字段</td><td align="left">使整个首部长度是 4 字节的整数倍.</td></tr></tbody></table></div><p><span id="TCP连接管理"></span></p><h2 id="TCP-连接管理"><a href="#TCP-连接管理" class="headerlink" title="TCP 连接管理"></a>TCP 连接管理</h2><p>TCP 连接的建立采用<strong>客户服务器</strong>方式, 主动发起连接建立的应用进程叫客户, 被动等待连接建立的应用叫服务器</p><p><span id="TCP三次握手（建立连接）"></span></p><h3 id="TCP-三次握手-建立连接"><a href="#TCP-三次握手-建立连接" class="headerlink" title="TCP 三次握手(建立连接)"></a>TCP 三次握手(建立连接)</h3><div align="center"><p><img src="/network-network6/tcpconnect.jpg" alt="三次握手"></p></div><ol><li>A 的 TCP 向 B 发出连接请求报文段<br>其首部中的同步位<code>SYN = 1</code>, 并选择序号<code>seq= x</code><br>表明传送数据时的第一个数据字节的序号是 x</li><li>B 的 TCP 收到连接请求报文后,如同意,则发回确认.<br>确认报文段中应使<code>SYN = 1</code>, <code>ACK = 1</code>, 确认号 <code>ack = x + 1</code>, 自己选择的序号 <code>seq = y</code></li><li>A 收到此报文段后向 B 给出确认<br>其<code>ACK = 1</code>, 确认号 <code>ack = y + 1</code><br>A 与 B 的 TCP 通知上层应用进程连接已建立</li></ol><blockquote><p>SYN 洪泛攻击, SYN 洪泛攻击发生在 OSI 第四层,<br>这种方式利用 TCP 协议的特性, 就是三次握手<br>攻击者发送 TCP SYN, SYN 是 TCP 三次握手中的第一个数据包, 而当服务器返回 ACK 后, 该攻击者就不对其进行再确认, 那这个 TCP 连接就处于挂起状态, 也就是所谓的半连接状态,<br>服务器收不到再确认的话, 还会重复发送 ACK 给攻击者, 这样更加会浪费服务器的资源<br>攻击者就对服务器发送非常大量的这种 TCP 连接, 由于每一个都没法完成三次握手, 所以在服务器上, 这些 TCP 连接会因为挂起状态而消耗 CPU 和内存, 最后服务器可能死机, 就无法为正常用户提供服务了</p></blockquote><p><span id="TCP释放连接"></span></p><h3 id="TCP-释放连接"><a href="#TCP-释放连接" class="headerlink" title="TCP 释放连接"></a>TCP 释放连接</h3><div align="center"><p><img src="/network-network6/tcpdisconnect.png" alt="TCP释放连接"></p></div><ol><li>A 把连接释放报文段首部的 <code>FIN = 1</code>, 序号<code>seq = u</code>, 等待 B 的确认</li><li>B 发出确认<br>首部<code>ACK = 1</code> , 确认号<code>ack= u + 1</code>,序号<code>seq = v</code><br>TCP 服务器进程通知高层应用进程.<br>此时 A 到 B 方向的连接释放, TCP 连接处于<strong>半关闭状态</strong><br><u>B 若发送数据,A 仍然要接收</u></li><li>若 B 没有数据向 A 发送,就向 A 发送连接释放报文,<br>首部<code>ACK = 1</code>,<code>FIN = 1</code>, 序号<code>seq = w</code>, 确认号<code>ack = u+ 1</code></li><li>A 收到 B 的释放报文,向 B 发送确认<br>首部<code>ACK = 1</code>, <code>seq = u + 1</code>, 确认号<code>ack = w + 1</code></li><li>等待<code>2MSL</code>后,TCP 连接真正释放<br>为了保证 A 的最后一个确认报文段能到达 B<br>防止已失效的连接请求报文段出现在本连接中<br>A 在发送完最后一个确认报文段后,在经过 2MSL, 就可以使本链接持续的时间内所产生的所有报文段,都从网络中消失,这样就可以是下一个新的连接中不会出现这种旧的连接请求报文段</li></ol><p><span id="TCP可靠传输"></span></p><h2 id="TCP-可靠传输"><a href="#TCP-可靠传输" class="headerlink" title="TCP 可靠传输"></a>TCP 可靠传输</h2><p>保证接收方进程从缓冲区读出字节流与发送方发出的字节流是完全一样的</p><p><span id="校验"></span></p><ul><li><h3 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h3>与 UDP 校验一样,增加伪首部<br>通过校验和校验</li></ul><p><span id="序号"></span></p><ul><li><h3 id="序号"><a href="#序号" class="headerlink" title="序号"></a>序号</h3><p>一个字节占一个序号<br>序号字段指的是一个报文段(数据)第一个字节的序号</p></li></ul><p><span id="确认"></span></p><ul><li><h3 id="确认"><a href="#确认" class="headerlink" title="确认"></a>确认</h3>接收方在<strong>合适的适合发送确认</strong><br>也可以在自己要发送数据时, 把<strong>确认信息顺便带上一起发送</strong><br>注意, TCP 默认使用累计确认(标明已经接收到 n 号帧和之前的所有数据, 若提取收到后面的数据,中间缺失了一部分, 发送的确认中还是确认的按序的大的序号)<blockquote><p>接收方不应过分推迟确认发送, 否则会导致发送方不必要的重传, 浪费网络资源<br>发送方收到确认后, 会将报文段从发送缓存中删除</p></blockquote></li></ul><p><span id="重传"></span></p><ul><li><h3 id="重传"><a href="#重传" class="headerlink" title="重传"></a>重传</h3><p>TCP 发送方在规定时间(重传时间内没有收到确认则重传已发送的报文段(超时重传)</p><ul><li><p>使用自适应算法, 动态改变重传时间 RTTs(加权平均往返时间)<br>第一次测量到<code>RTT</code>样本时<br>$$RTTs=RTT$$<br>以后每测量到一个新的 RTT 样本,就按下列公式计算<br>$$RTTs = (1 - \alpha ) \times RTTs + \alpha \times RTT$$<br>( $\alpha$ 越小,<code>RTTs</code>值更新越慢, $\alpha$ 越大,<code>RTTs值更新越快</code>)( $0&lt;\alpha &lt;1$ )</p><blockquote><p>这个好像只需要了解, 不需要掌握</p></blockquote></li><li><p>冗余 ACK(冗余确认)(也叫快速重传)<br>每当比期待序号大的失序报文到达时, 发送一个冗余 ACK, 指明下一个期待字节的序号</p><div align="center"><p><img src="/network-network6/moreack.jpg" alt="冗余ACK"></p></div></li></ul></li></ul><p><span id="TCP流量控制"></span></p><h2 id="TCP-流量控制"><a href="#TCP-流量控制" class="headerlink" title="TCP 流量控制"></a>TCP 流量控制</h2><blockquote><p>让发送方的发送速度减慢</p></blockquote><ul><li>利用滑动窗口机制实现流量控制<br>接收方根据自己接收缓存的大小, 动态的调整发送方的发送窗口大小<br>即 接收窗口 rwnd(接收方设置确认报文段的窗口字段来将 rwnd 通知给发送方), 发送方的发送窗口<strong>取接收窗口 rwnd 和拥塞窗口 cwnd 最小值</strong><blockquote><p>下面例子中, 建立连接时,主机 B 告诉主机 Arwnd=400</p></blockquote></li></ul><div align="center"><p><img src="/network-network6/tcpdata.jpg" alt="TCP 流量控制例子"></p></div><ul><li>持续计时器<br>目的:解决死锁问题(接收端发送给接发送端的报文丢失)<ol><li>只要 TCP 连接的一方接收到对方的零窗口通知,就启动改持续计时器</li><li>若持续计时器设置的时间到期,就发送一个零窗口探测报文段(仅携带 1 字节的数据),而对方就在确认这个探测报文段时给出了现在的窗口值</li><li>若窗口值仍然是零,则收到这个报文段的一方就重新设置持续计时器.若不是零则死锁打破</li></ol></li></ul><p><span id="拥塞控制"></span></p><h2 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h2><blockquote><p>拥塞<br>网络中某资源的去求超过了该资源所能提供的可用部分,网络的性能就要变坏</p></blockquote><ul><li>出现拥塞的原因(条件)<br>对资源需求的总和 &gt; 可用资源<blockquote><p>网络中许多资源同时供应不足-&gt;网络性能变差-&gt;网络吞吐量随输入增大而下降</p></blockquote></li><li>目的<br>防止过多的数据注入到网络中(全局性)</li></ul><blockquote><p>以下算法的假定</p><ol><li>数据单方向传送, 另一个方向只传送确认</li><li>接收方总是有足够大的缓存空间, 发送窗口大小取决于拥塞程度 发送窗口大小=min{接收窗口 rwnd,拥塞窗口 cwnd}</li></ol></blockquote><blockquote><p>接收窗口: 接收方根据接收缓存设置的值, 告知发送方,反应接收方容量<br>拥塞窗口: 发送方估算网络拥塞程度而设置的窗口值, 反应网络当前容量</p></blockquote><p><span id="慢开始和拥塞避免"></span></p><h3 id="慢开始和拥塞避免"><a href="#慢开始和拥塞避免" class="headerlink" title="慢开始和拥塞避免"></a>慢开始和拥塞避免</h3><p><span id="慢开始原理"></span></p><h4 id="慢开始原理"><a href="#慢开始原理" class="headerlink" title="慢开始原理"></a>慢开始原理</h4><ol><li>在主机刚刚开始发送报文段时可先将拥塞窗口 cwnd 设置为一个最大报文段 MSS 的数值</li><li>在每收到一个对新的报文段的确认后,将拥塞窗口增加<code>MIN(N, MSS)</code><blockquote><p>指数增长速率<br>其中 N 为原先未被确认,但现在被刚收到的确认报文段所确认的字节数</p></blockquote></li><li>发送端在开始发送数据时, 注入到网络的分组大大减少, 有利于防止网络拥塞</li></ol><p><span id="拥塞避免原理"></span></p><h4 id="拥塞避免原理"><a href="#拥塞避免原理" class="headerlink" title="拥塞避免原理"></a>拥塞避免原理</h4><p>在每经过一个往返时延 RTT 后, 将拥塞窗口增加一个 MSS 的数值</p><blockquote><p>线性增长速率</p></blockquote><p><span id="慢开始和拥塞避免结合"></span></p><h4 id="慢开始和拥塞避免结合"><a href="#慢开始和拥塞避免结合" class="headerlink" title="慢开始和拥塞避免结合"></a>慢开始和拥塞避免结合</h4><blockquote><p>ssthresh: 慢开始门限</p></blockquote><blockquote><p>收到确认后就执行算法</p></blockquote><ul><li><code>cwnd &lt; ssthresh</code>时, 使用慢开始算法</li><li><code>cwnd &gt; ssthresh</code>时, 使用拥塞避免算法</li><li><code>cwnd = ssthresh</code>时, 可以使用任一种算法</li></ul><p>无论在慢开始阶段还是在拥塞避免阶段,只要发送方判断网络出现拥塞(重传定时器超时),就执行:</p><p>$$<br>ssthresh = max(cwnd/2, 2)\\<br>cwnd = 1\\<br>执行慢开始算法<br>$$</p><blockquote><p>网络拥塞时会修改 ssthresh<br>使发生拥塞的路由器有足够时间把队列中积压的分组处理完毕</p></blockquote><div align="center"><p><img src="/network-network6/skortstart.jpg" alt="慢开始和拥塞避免图示"></p></div><p><span id="快重传和快恢复"></span></p><h3 id="快重传和快恢复"><a href="#快重传和快恢复" class="headerlink" title="快重传和快恢复"></a>快重传和快恢复</h3><p><span id="快重传原理"></span></p><h4 id="快重传原理"><a href="#快重传原理" class="headerlink" title="快重传原理"></a>快重传原理</h4><blockquote><p>快重传可以让发送方尽早知道发生了个别报文段的丢失</p></blockquote><p>发送端只要一<code>连收到三个重复的 ACK</code> 即可<strong>断定有分组丢失</strong>了,就重传丢失的报文段而不必等到计时器超时</p><p><span id="快恢复原理"></span></p><h4 id="快恢复原理"><a href="#快恢复原理" class="headerlink" title="快恢复原理"></a>快恢复原理</h4><p>当发送端收到<code>连续三个重复的 ACK</code> 时, 就重新设置慢开始门限 <code>ssthresh</code></p><blockquote><p>与慢开始不同之处是拥塞窗口 cwnd 不是设置为 1, 而是设置为 ssthresh + 3 × MSS</p></blockquote><ul><li>若收到的重复的 ACK 为 n 个(n &gt; 3), 则将 cwnd 设置为 ssthresh + n × MSS</li><li>若发送窗口值还容许发送报文段, 就按拥塞避免算法继续发送报文段</li><li>若收到了确认新的报文段的 ACK, 就将 cwnd 缩小到 ssthresh</li></ul><div align="center"><p><img src="/network-network6/quickresend.jpg" alt="快重传与快恢复结合图示"></p></div><p><span id="拥塞控制与流量控制的区别"></span></p><h2 id="拥塞控制与流量控制的区别"><a href="#拥塞控制与流量控制的区别" class="headerlink" title="拥塞控制与流量控制的区别"></a>拥塞控制与流量控制的区别</h2><ul><li>拥塞控制是<ol><li>防止过多的数据注入到网络中,使网络中的路由器或链路不致过载</li><li>所要做的都有一个前提,就是网络能够承受现有的网络资源</li><li>是一个全局性的过程,涉及到所有的主机、路由器,以及与降低网络传输性能有关的所有因素</li></ol></li><li>流量控制<ol><li>指点对点通信量的控制,是端到端的问题(接收端控制发送端)</li><li>要做的是抑制发送端发送的速率,以便接收端来得及接收</li></ol></li></ul><p><span id="UDP无连接的用户数据报协议"></span></p><h1 id="UDP-无连接的用户数据报协议"><a href="#UDP-无连接的用户数据报协议" class="headerlink" title="UDP 无连接的用户数据报协议"></a>UDP 无连接的用户数据报协议</h1><p><strong>不可靠, 无连接, 时延小, 适用与小文件</strong></p><blockquote><p>UDP 只在 IP 数据报服务上增加了分用和差错检测功能</p></blockquote><p><span id="特点"></span></p><h2 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h2><ol><li>无连接<br>减少开销和发送数据之前的时延</li><li>使用最大努力交付<br>不保证可靠交付</li><li>面向报文<br>适合一次性传输少量数据的网络应用<br>对应用层传下来的报文不做任何改变,直接将其封装到传输层数据报的数据部分<br>一次性发完一个完整的报文</li><li>无拥塞控制<br>适合实时应用</li><li>首部开销小<br>首部长度<code>8B</code>(TCP 的<code>20B</code>)</li></ol><p><span id="UDP首部格式"></span></p><h2 id="UDP-首部格式"><a href="#UDP-首部格式" class="headerlink" title="UDP 首部格式"></a>UDP 首部格式</h2><div align="center"><p><img src="/network-network6/udphead.jpg" alt="UDP首部格式"></p></div><ul><li>源端口号<br>可有可无, 标识时哪个应用程序发送的</li><li>目的端口号<br>发送给目的主机的哪个进程</li><li>UDP 长度<br>数据报的全部长度(包括首部和数据部分)</li><li>UDP 检验和<br>检验整个 UDP 数据报是否出错(包括首部和数据部分)</li></ul><blockquote><p>分用时, 找不到对应的目的端口号</p><blockquote><p>接收方丢弃报文, 并给发送方发送 ICMP”端口不可达|差错报告报文</p></blockquote></blockquote><p><span id="UDP校验"></span></p><h3 id="UDP-校验"><a href="#UDP-校验" class="headerlink" title="UDP 校验"></a>UDP 校验</h3><div align="center"><p><img src="/network-network6/udpcheck1.jpg" alt="UDP校验伪首部"></p></div><blockquote><p>伪首部在计算校验和才使用, 不传递到上下层<br>伪首部第 4 个字段<code>17</code>指的是封装该 UDP 报文的 IP 数据报首部协议字段是 17<br>UDP 长度: UDP 首部<code>8B</code>+数据部分长度(不包括伪首部)</p></blockquote><div align="center"><p><img src="/network-network6/udpcheck2.jpg" alt="UDP校验码的计算"></p></div><blockquote><p>每 4 个字节为一块, 分块相加</p></blockquote><ul><li>发送端计算校验和<ol><li>拼接伪首部</li><li>全 0 填充校验和字段</li><li>全 0 填充数据部分(填充为<code>4B</code>的倍数)</li><li>伪首部+首部+数据部分 采用二进制反码求和</li><li>求和反码填入检验和字段</li><li>去掉伪首部, 发送</li></ol></li><li>接收端检验校验和<ol><li>拼接伪首部</li><li>伪首部+首部+数据部分采用二进制反码求和<br>若求和结果全为 1, 则无差错<br>否则丢弃数据报或交给应用层附上出差错的警告</li></ol></li></ul></div><div class="article-licensing box"><div class="licensing-title"><p>计算机网络——传输层</p><p><a href="https://blog.cshf.xyz/network-network6/">https://blog.cshf.xyz/network-network6/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>CSHF</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-07-22</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-08-17</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/NetWork/">NetWork</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/network-network7/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">计算机网络——应用层</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/network-network5/"><span class="level-item">计算机网络——网络层</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="waline-thread"></div><script src="https://cdn.jsdelivr.net/npm/@waline/client@1.3.1/dist/Waline.min.js"></script><script>Waline({el:"#waline-thread",serverURL:"https://comment-33ock0yem-smallpigboy.vercel.app/",lang:"zh-CN",visitor:!1,emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],dark:"auto",meta:["nick","mail","link"],requiredMeta:[],login:"enable",avatar:"mp",pageSize:10,avatarCDN:"https://sdn.geekzu.org/avatar/",avatarForce:!1,highlight:!0,mathTagSupport:!1,copyright:!0,locale:{placeholder:"Comment here..."}})</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#目录"><span class="level-left"><span class="level-item">目录</span></span></a></li><li><a class="level is-mobile" href="#基本概念"><span class="level-left"><span class="level-item">基本概念</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#传输层功能"><span class="level-left"><span class="level-item">传输层功能</span></span></a></li><li><a class="level is-mobile" href="#传输层的寻址和端口"><span class="level-left"><span class="level-item">传输层的寻址和端口</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#端口-逻辑端口-软件端口"><span class="level-left"><span class="level-item">端口(逻辑端口/软件端口)</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#TCP-面向连接的传送控制协议"><span class="level-left"><span class="level-item">TCP 面向连接的传送控制协议</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#特点"><span class="level-left"><span class="level-item">特点</span></span></a></li><li><a class="level is-mobile" href="#TCP-首部格式-重点"><span class="level-left"><span class="level-item">TCP 首部格式(重点)</span></span></a></li><li><a class="level is-mobile" href="#TCP-连接管理"><span class="level-left"><span class="level-item">TCP 连接管理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TCP-三次握手-建立连接"><span class="level-left"><span class="level-item">TCP 三次握手(建立连接)</span></span></a></li><li><a class="level is-mobile" href="#TCP-释放连接"><span class="level-left"><span class="level-item">TCP 释放连接</span></span></a></li></ul></li><li><a class="level is-mobile" href="#TCP-可靠传输"><span class="level-left"><span class="level-item">TCP 可靠传输</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#校验"><span class="level-left"><span class="level-item">校验</span></span></a></li><li><a class="level is-mobile" href="#序号"><span class="level-left"><span class="level-item">序号</span></span></a></li><li><a class="level is-mobile" href="#确认"><span class="level-left"><span class="level-item">确认</span></span></a></li><li><a class="level is-mobile" href="#重传"><span class="level-left"><span class="level-item">重传</span></span></a></li></ul></li><li><a class="level is-mobile" href="#TCP-流量控制"><span class="level-left"><span class="level-item">TCP 流量控制</span></span></a></li><li><a class="level is-mobile" href="#拥塞控制"><span class="level-left"><span class="level-item">拥塞控制</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#慢开始和拥塞避免"><span class="level-left"><span class="level-item">慢开始和拥塞避免</span></span></a></li><li><a class="level is-mobile" href="#快重传和快恢复"><span class="level-left"><span class="level-item">快重传和快恢复</span></span></a></li></ul></li><li><a class="level is-mobile" href="#拥塞控制与流量控制的区别"><span class="level-left"><span class="level-item">拥塞控制与流量控制的区别</span></span></a></li></ul></li><li><a class="level is-mobile" href="#UDP-无连接的用户数据报协议"><span class="level-left"><span class="level-item">UDP 无连接的用户数据报协议</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#特点-1"><span class="level-left"><span class="level-item">特点</span></span></a></li><li><a class="level is-mobile" href="#UDP-首部格式"><span class="level-left"><span class="level-item">UDP 首部格式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#UDP-校验"><span class="level-left"><span class="level-item">UDP 校验</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list>li>a.is-active+.menu-list{display:block}#toc .menu-list>li>a+.menu-list{display:none}</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/App/"><span class="tag">App</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ClientIP/"><span class="tag">ClientIP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer-Organization-Principles/"><span class="tag">Computer Organization Principles</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DataStructure/"><span class="tag">DataStructure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/InformationLeakage/"><span class="tag">InformationLeakage</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kivy/"><span class="tag">Kivy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LKM/"><span class="tag">LKM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NetWork/"><span class="tag">NetWork</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PE/"><span class="tag">PE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WEB/"><span class="tag">WEB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2021-08-09T11:09:57.000Z">2021-08-09</time></p><p class="title"><a href="/COP-COP-7/">计算机组成原理——输入输出系统</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/Computer-Organization-Principles/">Computer Organization Principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-08-07T11:28:07.000Z">2021-08-07</time></p><p class="title"><a href="/COP-COP-6/">计算机组成原理——总线</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/Computer-Organization-Principles/">Computer Organization Principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-23T12:18:02.000Z">2021-07-23</time></p><p class="title"><a href="/network-network7/">计算机网络——应用层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-22T11:09:54.000Z">2021-07-22</time></p><p class="title"><a href="/network-network6/">计算机网络——传输层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-07-20T08:36:33.000Z">2021-07-20</time></p><p class="title"><a href="/network-network5/">计算机网络——网络层</a></p><p class="categories"><a href="/categories/Note/">Note</a> / <a href="/categories/Note/NetWork/">NetWork</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/CSHF_LOGO.png" alt="CSHF" height="28"></a><p class="is-size-7"><span>&copy; 2021 CSHF</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script></body></html>